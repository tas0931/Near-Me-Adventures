{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\CSE425 mp\\\\NM adventures Final (1)\\\\NM adventures Final\\\\frontend\\\\src\\\\components\\\\ConnectionButton.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getConnectionStatus, sendConnectionRequest, cancelConnectionRequest, acceptConnectionRequest, rejectConnectionRequest } from '../services/api';\nimport { useNotifications } from '../contexts/NotificationsContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ConnectionButton({\n  otherUserId,\n  otherUserName\n}) {\n  _s();\n  const {\n    add: notify\n  } = useNotifications();\n  const [status, setStatus] = useState(null);\n  const [connectionId, setConnectionId] = useState(null);\n  const [isRequester, setIsRequester] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    loadConnectionStatus();\n  }, [otherUserId]);\n  const loadConnectionStatus = async () => {\n    try {\n      setLoading(true);\n      const data = await getConnectionStatus(otherUserId);\n      setStatus(data.status);\n      setConnectionId(data.connectionId);\n      setIsRequester(data.isRequester);\n    } catch (err) {\n      console.error('Failed to load connection status:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSendRequest = async () => {\n    try {\n      const result = await sendConnectionRequest(otherUserId);\n      setStatus('pending');\n      setConnectionId(result.connection._id);\n      setIsRequester(true);\n      notify('Connection request sent', {\n        type: 'success'\n      });\n    } catch (err) {\n      notify(err.message || 'Failed to send request', {\n        type: 'error'\n      });\n    }\n  };\n  const handleCancelRequest = async () => {\n    try {\n      await cancelConnectionRequest(connectionId);\n      setStatus('none');\n      setConnectionId(null);\n      setIsRequester(false);\n      notify('Connection request cancelled', {\n        type: 'info'\n      });\n    } catch (err) {\n      notify(err.message || 'Failed to cancel request', {\n        type: 'error'\n      });\n    }\n  };\n  const handleAccept = async () => {\n    try {\n      await acceptConnectionRequest(connectionId);\n      setStatus('accepted');\n      notify('Connection request accepted', {\n        type: 'success'\n      });\n    } catch (err) {\n      notify(err.message || 'Failed to accept request', {\n        type: 'error'\n      });\n    }\n  };\n  const handleReject = async () => {\n    try {\n      await rejectConnectionRequest(connectionId);\n      setStatus('rejected');\n      notify('Connection request rejected', {\n        type: 'info'\n      });\n    } catch (err) {\n      notify(err.message || 'Failed to reject request', {\n        type: 'error'\n      });\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-btn\",\n    children: \"...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 23\n  }, this);\n  if (status === 'none') {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-connect\",\n      onClick: handleSendRequest,\n      children: \"Add Friend\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'pending' && isRequester) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connection-status\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-text\",\n        children: \"Request Sent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-cancel\",\n        onClick: handleCancelRequest,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'pending' && !isRequester) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connection-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-accept\",\n        onClick: handleAccept,\n        children: \"Accept\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-reject\",\n        onClick: handleReject,\n        children: \"Reject\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'accepted') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connection-status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-friends\",\n        children: \"\\u2713 Friends\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this);\n  }\n  if (status === 'rejected') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"connection-status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-rejected\",\n        children: \"Request Rejected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n}\n_s(ConnectionButton, \"OCpTv+XEunJOHi6vl1v/iEoxkBY=\", false, function () {\n  return [useNotifications];\n});\n_c = ConnectionButton;\nvar _c;\n$RefreshReg$(_c, \"ConnectionButton\");","map":{"version":3,"names":["React","useState","useEffect","getConnectionStatus","sendConnectionRequest","cancelConnectionRequest","acceptConnectionRequest","rejectConnectionRequest","useNotifications","jsxDEV","_jsxDEV","ConnectionButton","otherUserId","otherUserName","_s","add","notify","status","setStatus","connectionId","setConnectionId","isRequester","setIsRequester","loading","setLoading","loadConnectionStatus","data","err","console","error","handleSendRequest","result","connection","_id","type","message","handleCancelRequest","handleAccept","handleReject","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/CSE425 mp/NM adventures Final (1)/NM adventures Final/frontend/src/components/ConnectionButton.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  getConnectionStatus,\n  sendConnectionRequest,\n  cancelConnectionRequest,\n  acceptConnectionRequest,\n  rejectConnectionRequest\n} from '../services/api';\nimport { useNotifications } from '../contexts/NotificationsContext';\n\nexport default function ConnectionButton({ otherUserId, otherUserName }) {\n  const { add: notify } = useNotifications();\n  const [status, setStatus] = useState(null);\n  const [connectionId, setConnectionId] = useState(null);\n  const [isRequester, setIsRequester] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadConnectionStatus();\n  }, [otherUserId]);\n\n  const loadConnectionStatus = async () => {\n    try {\n      setLoading(true);\n      const data = await getConnectionStatus(otherUserId);\n      setStatus(data.status);\n      setConnectionId(data.connectionId);\n      setIsRequester(data.isRequester);\n    } catch (err) {\n      console.error('Failed to load connection status:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendRequest = async () => {\n    try {\n      const result = await sendConnectionRequest(otherUserId);\n      setStatus('pending');\n      setConnectionId(result.connection._id);\n      setIsRequester(true);\n      notify('Connection request sent', { type: 'success' });\n    } catch (err) {\n      notify(err.message || 'Failed to send request', { type: 'error' });\n    }\n  };\n\n  const handleCancelRequest = async () => {\n    try {\n      await cancelConnectionRequest(connectionId);\n      setStatus('none');\n      setConnectionId(null);\n      setIsRequester(false);\n      notify('Connection request cancelled', { type: 'info' });\n    } catch (err) {\n      notify(err.message || 'Failed to cancel request', { type: 'error' });\n    }\n  };\n\n  const handleAccept = async () => {\n    try {\n      await acceptConnectionRequest(connectionId);\n      setStatus('accepted');\n      notify('Connection request accepted', { type: 'success' });\n    } catch (err) {\n      notify(err.message || 'Failed to accept request', { type: 'error' });\n    }\n  };\n\n  const handleReject = async () => {\n    try {\n      await rejectConnectionRequest(connectionId);\n      setStatus('rejected');\n      notify('Connection request rejected', { type: 'info' });\n    } catch (err) {\n      notify(err.message || 'Failed to reject request', { type: 'error' });\n    }\n  };\n\n  if (loading) return <div className=\"loading-btn\">...</div>;\n\n  if (status === 'none') {\n    return (\n      <button className=\"btn-connect\" onClick={handleSendRequest}>\n        Add Friend\n      </button>\n    );\n  }\n\n  if (status === 'pending' && isRequester) {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-text\">Request Sent</span>\n        <button className=\"btn-cancel\" onClick={handleCancelRequest}>\n          Cancel\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'pending' && !isRequester) {\n    return (\n      <div className=\"connection-actions\">\n        <button className=\"btn-accept\" onClick={handleAccept}>\n          Accept\n        </button>\n        <button className=\"btn-reject\" onClick={handleReject}>\n          Reject\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'accepted') {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-friends\">âœ“ Friends</span>\n      </div>\n    );\n  }\n\n  if (status === 'rejected') {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-rejected\">Request Rejected</span>\n      </div>\n    );\n  }\n\n  return null;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}