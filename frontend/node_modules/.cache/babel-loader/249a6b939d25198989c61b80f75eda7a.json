{"ast":null,"code":"// Simple client-side bookings service using localStorage\nconst KEY = 'nearme_bookings';\nfunction parsePrice(priceStr) {\n  if (!priceStr) return 0;\n  const s = String(priceStr).trim();\n  if (/free/i.test(s)) return 0;\n  // extract first number sequence (handles ranges like \"৳ 800 – 1,200\")\n  const m = s.replace(/,/g, '').match(/(\\d+)/);\n  return m ? Number(m[0]) : 0;\n}\nexport function getBookings() {\n  try {\n    const raw = localStorage.getItem(KEY) || '[]';\n    return JSON.parse(raw);\n  } catch (err) {\n    return [];\n  }\n}\nexport function saveBookings(list) {\n  localStorage.setItem(KEY, JSON.stringify(list || []));\n}\nexport function addBooking(item) {\n  if (!item) return;\n  const bookings = getBookings();\n  // avoid duplicate booking with same id\n  const exists = bookings.find(b => b.id === item.id);\n  if (exists) return bookings;\n  const price = parsePrice(item.price);\n  const record = {\n    id: item.id,\n    title: item.title,\n    price,\n    priceLabel: item.price,\n    img: item.img,\n    duration: item.duration\n  };\n  bookings.push(record);\n  saveBookings(bookings);\n  return bookings;\n}\nexport function removeBooking(id) {\n  const bookings = getBookings().filter(b => b.id !== id);\n  saveBookings(bookings);\n  return bookings;\n}\nexport function clearBookings() {\n  saveBookings([]);\n}\nexport function getTotal() {\n  return getBookings().reduce((s, b) => s + (b.price || 0), 0);\n}\nexport default {\n  getBookings,\n  addBooking,\n  removeBooking,\n  clearBookings,\n  getTotal\n};","map":{"version":3,"names":["KEY","parsePrice","priceStr","s","String","trim","test","m","replace","match","Number","getBookings","raw","localStorage","getItem","JSON","parse","err","saveBookings","list","setItem","stringify","addBooking","item","bookings","exists","find","b","id","price","record","title","priceLabel","img","duration","push","removeBooking","filter","clearBookings","getTotal","reduce"],"sources":["E:/NM Adventures/travel-suggestor/frontend/src/services/bookings.js"],"sourcesContent":["// Simple client-side bookings service using localStorage\r\nconst KEY = 'nearme_bookings';\r\n\r\nfunction parsePrice(priceStr) {\r\n  if (!priceStr) return 0;\r\n  const s = String(priceStr).trim();\r\n  if (/free/i.test(s)) return 0;\r\n  // extract first number sequence (handles ranges like \"৳ 800 – 1,200\")\r\n  const m = s.replace(/,/g, '').match(/(\\d+)/);\r\n  return m ? Number(m[0]) : 0;\r\n}\r\n\r\nexport function getBookings() {\r\n  try {\r\n    const raw = localStorage.getItem(KEY) || '[]';\r\n    return JSON.parse(raw);\r\n  } catch (err) {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveBookings(list) {\r\n  localStorage.setItem(KEY, JSON.stringify(list || []));\r\n}\r\n\r\nexport function addBooking(item) {\r\n  if (!item) return;\r\n  const bookings = getBookings();\r\n  // avoid duplicate booking with same id\r\n  const exists = bookings.find(b => b.id === item.id);\r\n  if (exists) return bookings;\r\n  const price = parsePrice(item.price);\r\n  const record = {\r\n    id: item.id,\r\n    title: item.title,\r\n    price,\r\n    priceLabel: item.price,\r\n    img: item.img,\r\n    duration: item.duration\r\n  };\r\n  bookings.push(record);\r\n  saveBookings(bookings);\r\n  return bookings;\r\n}\r\n\r\nexport function removeBooking(id) {\r\n  const bookings = getBookings().filter(b => b.id !== id);\r\n  saveBookings(bookings);\r\n  return bookings;\r\n}\r\n\r\nexport function clearBookings() {\r\n  saveBookings([]);\r\n}\r\n\r\nexport function getTotal() {\r\n  return getBookings().reduce((s, b) => s + (b.price || 0), 0);\r\n}\r\n\r\nexport default { getBookings, addBooking, removeBooking, clearBookings, getTotal };\r\n"],"mappings":"AAAA;AACA,MAAMA,GAAG,GAAG,iBAAiB;AAE7B,SAASC,UAAUA,CAACC,QAAQ,EAAE;EAC5B,IAAI,CAACA,QAAQ,EAAE,OAAO,CAAC;EACvB,MAAMC,CAAC,GAAGC,MAAM,CAACF,QAAQ,CAAC,CAACG,IAAI,CAAC,CAAC;EACjC,IAAI,OAAO,CAACC,IAAI,CAACH,CAAC,CAAC,EAAE,OAAO,CAAC;EAC7B;EACA,MAAMI,CAAC,GAAGJ,CAAC,CAACK,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC;EAC5C,OAAOF,CAAC,GAAGG,MAAM,CAACH,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC7B;AAEA,OAAO,SAASI,WAAWA,CAAA,EAAG;EAC5B,IAAI;IACF,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAACd,GAAG,CAAC,IAAI,IAAI;IAC7C,OAAOe,IAAI,CAACC,KAAK,CAACJ,GAAG,CAAC;EACxB,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZ,OAAO,EAAE;EACX;AACF;AAEA,OAAO,SAASC,YAAYA,CAACC,IAAI,EAAE;EACjCN,YAAY,CAACO,OAAO,CAACpB,GAAG,EAAEe,IAAI,CAACM,SAAS,CAACF,IAAI,IAAI,EAAE,CAAC,CAAC;AACvD;AAEA,OAAO,SAASG,UAAUA,CAACC,IAAI,EAAE;EAC/B,IAAI,CAACA,IAAI,EAAE;EACX,MAAMC,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9B;EACA,MAAMc,MAAM,GAAGD,QAAQ,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKL,IAAI,CAACK,EAAE,CAAC;EACnD,IAAIH,MAAM,EAAE,OAAOD,QAAQ;EAC3B,MAAMK,KAAK,GAAG5B,UAAU,CAACsB,IAAI,CAACM,KAAK,CAAC;EACpC,MAAMC,MAAM,GAAG;IACbF,EAAE,EAAEL,IAAI,CAACK,EAAE;IACXG,KAAK,EAAER,IAAI,CAACQ,KAAK;IACjBF,KAAK;IACLG,UAAU,EAAET,IAAI,CAACM,KAAK;IACtBI,GAAG,EAAEV,IAAI,CAACU,GAAG;IACbC,QAAQ,EAAEX,IAAI,CAACW;EACjB,CAAC;EACDV,QAAQ,CAACW,IAAI,CAACL,MAAM,CAAC;EACrBZ,YAAY,CAACM,QAAQ,CAAC;EACtB,OAAOA,QAAQ;AACjB;AAEA,OAAO,SAASY,aAAaA,CAACR,EAAE,EAAE;EAChC,MAAMJ,QAAQ,GAAGb,WAAW,CAAC,CAAC,CAAC0B,MAAM,CAACV,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC;EACvDV,YAAY,CAACM,QAAQ,CAAC;EACtB,OAAOA,QAAQ;AACjB;AAEA,OAAO,SAASc,aAAaA,CAAA,EAAG;EAC9BpB,YAAY,CAAC,EAAE,CAAC;AAClB;AAEA,OAAO,SAASqB,QAAQA,CAAA,EAAG;EACzB,OAAO5B,WAAW,CAAC,CAAC,CAAC6B,MAAM,CAAC,CAACrC,CAAC,EAAEwB,CAAC,KAAKxB,CAAC,IAAIwB,CAAC,CAACE,KAAK,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9D;AAEA,eAAe;EAAElB,WAAW;EAAEW,UAAU;EAAEc,aAAa;EAAEE,aAAa;EAAEC;AAAS,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}