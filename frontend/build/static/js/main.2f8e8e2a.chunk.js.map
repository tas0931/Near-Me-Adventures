{"version":3,"sources":["services/api.js","services/bookings.js","contexts/ThemeContext.jsx","pages/Register.jsx","pages/Login.jsx","pages/Home.jsx","components/ConfirmModal.jsx","contexts/NotificationsContext.jsx","pages/Dashboard.jsx","pages/AdminDashboard.jsx","pages/AdminLogin.jsx","components/Card.jsx","data/places.js","pages/Browse.jsx","pages/AllPlaces.jsx","pages/Analysis.jsx","pages/UserAnalysis.jsx","pages/TrendingExperiences.jsx","pages/AddExperiences.jsx","pages/CreatedExperiences.jsx","pages/Chat.jsx","pages/Payment.jsx","pages/Recommendation.jsx","pages/Reviews.jsx","pages/GiveReview.jsx","pages/ReviewManage.jsx","components/PendingRequests.jsx","components/FriendsList.jsx","pages/Connections.jsx","components/ConnectionButton.jsx","pages/FindPeople.jsx","pages/Messages.jsx","pages/DirectChat.jsx","components/RequireAuth.jsx","components/Navbar.jsx","components/Sidebar.jsx","components/Layout.jsx","App.jsx","index.jsx"],"names":["BASE","async","request","path","options","arguments","length","undefined","headers","token","localStorage","getItem","res","fetch","concat","_objectSpread","data","json","catch","ok","Error","message","register","payload","method","body","JSON","stringify","login","getProfile","getAllUsers","browseUsers","deleteUser","id","getWishlist","addWishlist","item","removeWishlist","itemId","getServerBookings","addServerBooking","removeServerBooking","payBooking","getUserBookings","userId","getUserWishlist","getChatMessages","postChatMessage","getTrending","getAllReviews","createReview","deleteReview","sendConnectionRequest","recipientId","acceptConnectionRequest","connectionId","rejectConnectionRequest","cancelConnectionRequest","getPendingRequests","getSentRequests","getFriends","removeFriend","friendId","getConnectionStatus","otherUserId","sendDirectMessage","text","getConversation","getConversations","getUnreadCount","markAsRead","deleteDirectMessage","messageId","KEY","isAuthenticated","parsePrice","priceStr","s","String","trim","test","m","replace","match","Number","getBookings","raw","parse","err","saveBookings","list","setItem","addBooking","price","title","img","duration","priceLabel","then","bookings","find","b","record","push","removeBooking","filter","clearBookings","getTotal","reduce","ThemeContext","createContext","useTheme","context","useContext","ThemeProvider","_ref","children","theme","setTheme","useState","useEffect","document","documentElement","setAttribute","_jsx","Provider","value","toggleTheme","prev","Register","form","setForm","name","email","password","confirm","loading","setLoading","msg","setMsg","navigate","useNavigate","onChange","e","target","className","_jsxs","style","color","includes","onSubmit","preventDefault","user","type","disabled","Link","to","Login","marginTop","Home","setUser","removeItem","load","marginBottom","ConfirmModal","open","onConfirm","onCancel","display","gap","justifyContent","onClick","NotificationsContext","NotificationsProvider","notes","setNotes","add","useCallback","opts","Date","now","Math","random","note","timeout","n","setTimeout","x","remove","map","useNotifications","ctx","Dashboard","setBookings","wishlist","setWishlist","sortAsc","setSortAsc","bookingsSortAsc","setBookingsSortAsc","pendingRemove","setPendingRemove","pendingBook","setPendingBook","mounted","paid","paymentId","loadServerBookings","loadWishlist","getPriceValue","v","parsed","parseFloat","isFinite","textAlign","marginRight","gridTemplateColumns","alignItems","margin","toggleBookingsSort","next","sorted","sort","a","pa","pb","padding","backgroundImage","fontWeight","handleRemove","toggleSort","w","handleRemoveWishlist","confirmBook","result","updated","confirmRemove","cancelRemove","AdminDashboard","error","setError","users","setUsers","search","setSearch","searchBy","setSearchBy","deletingId","setDeletingId","background","minHeight","flexDirection","borderRadius","placeholder","width","maxWidth","overflowX","borderCollapse","borderBottom","u","q","toLowerCase","window","_id","alert","border","cursor","AdminLogin","Card","desc","rating","added","setAdded","wishlisted","setWishlisted","React","check","i","showConfirm","setShowConfirm","onBook","confirmBooking","sample","Browse","displayed","useMemo","slice","AllPlaces","refresh","setRefresh","created","all","filtered","term","searchNum","itemPrice","marginLeft","Analysis","flex","UserAnalysis","useParams","bRes","wRes","Promise","TrendingExperiences","setData","topBooked","topWishlisted","console","it","src","alt","height","objectFit","count","AddExperiences","setTitle","setDesc","setDuration","setPrice","setImg","setRating","place","arr","min","max","step","CreatedExperiences","places","setPlaces","Array","isArray","p","pNum","colSpan","handleDelete","Chat","messages","setMessages","setText","listRef","useRef","prevCount","newList","newCount","dispatchEvent","CustomEvent","detail","iv","setInterval","clearInterval","current","scrollTop","scrollHeight","send","fresh","ref","senderName","sender","createdAt","toLocaleString","onKeyPress","key","Payment","local","getClientBookings","api","_Fragment","handleMarkDone","handlePay","Recommendation","activities","setActivities","budget","setBudget","environment","setEnvironment","pace","setPace","foodInterest","setFoodInterest","crowd","setCrowd","setResult","classify","inputs","act","split","Boolean","scores","contains","keywords","some","k","Object","entries","primary","secondary","keys","explanation","words","join","fontSize","lineHeight","ReviewsFeed","reviews","setReviews","fetchReviews","log","handler","addEventListener","removeEventListener","review","_review$userId","date","location","toLocaleDateString","year","month","day","destination","_","reviewText","fontStyle","GiveReview","submitting","setSubmitting","success","setSuccess","loadUserProfile","handleInputChange","profilePicture","onError","Event","_err$body","status","htmlFor","required","star","handleRatingChange","getRatingLabel","rows","ReviewManage","r","_r$userId","_r$userId2","_r$userId3","_r$userId4","PendingRequests","requests","setRequests","loadPendingRequests","pendingRequests","requester","handleAccept","handleReject","FriendsList","friends","setFriends","loadFriends","friend","handleMessage","f","handleRemoveFriend","Connections","activeTab","setActiveTab","sentRequests","setSentRequests","loadingSent","setLoadingSent","handleTabChange","tab","loadSentRequests","recipient","handleCancelRequest","ConnectionButton","otherUserName","setStatus","setConnectionId","isRequester","setIsRequester","loadConnectionStatus","handleSendRequest","connection","FindPeople","loadUsers","filteredUsers","charAt","toUpperCase","Messages","conversations","setConversations","loadData","interval","convData","friendsData","startChat","conv","lastMessageTime","lastMessage","unreadCount","DirectChat","_otherUser$name","newMessage","setNewMessage","sending","setSending","otherUser","setOtherUser","currentUserId","setCurrentUserId","messagesEndRef","loadCurrentUser","loadConversation","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","firstMsg","other","handleSend","toLocaleTimeString","hour","minute","shiftKey","RequireAuth","Navigate","Navbar","onToggleSidebar","sidebarOpen","handleLogout","Sidebar","isOpen","unreadChat","pendingConnections","navItems","icon","label","badge","NavLink","_ref2","isActive","_ref3","Layout","setSidebarOpen","setUnreadChat","setPendingConnections","loadPendingConnections","_e$detail","c","toggleSidebar","App","Routes","Route","element","Reviews","process","env","ReactDOM","render","StrictMode","Router","getElementById"],"mappings":"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","file":"static/js/main.2f8e8e2a.chunk.js","sourcesContent":["const BASE = 'http://localhost:5000/api';\n\nasync function request(path, options = {}) {\n  const headers = options.headers || {};\n  const token = localStorage.getItem('token');\n  if (token) headers['Authorization'] = 'Bearer ' + token;\n  headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n  const res = await fetch(`${BASE}${path}`, { ...options, headers });\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok) throw new Error(data.message || 'Request failed');\n  return data;\n}\n\nexport function register(payload) {\n  return request('/auth/register', { method: 'POST', body: JSON.stringify(payload) });\n}\n\nexport function login(payload) {\n  return request('/auth/login', { method: 'POST', body: JSON.stringify(payload) });\n}\n\nexport function getProfile() {\n  return request('/auth/me', { method: 'GET' });\n}\n\nexport function getAllUsers() {\n  return request('/auth/admin/users', { method: 'GET' });\n}\n\nexport function browseUsers() {\n  return request('/auth/users/browse', { method: 'GET' });\n}\n\nexport function deleteUser(id) {\n  return request(`/auth/admin/users/${id}`, { method: 'DELETE' });\n}\n\n// Wishlist APIs\nexport function getWishlist() {\n  return request('/wishlist', { method: 'GET' });\n}\n\nexport function addWishlist(item) {\n  return request('/wishlist', { method: 'POST', body: JSON.stringify(item) });\n}\n\nexport function removeWishlist(itemId) {\n  return request(`/wishlist/${itemId}`, { method: 'DELETE' });\n}\n\n// Bookings APIs\nexport function getServerBookings() {\n  return request('/bookings', { method: 'GET' });\n}\n\nexport function addServerBooking(item) {\n  return request('/bookings', { method: 'POST', body: JSON.stringify(item) });\n}\n\nexport function removeServerBooking(itemId) {\n  return request(`/bookings/${itemId}`, { method: 'DELETE' });\n}\n\nexport function payBooking(itemId) {\n  return request(`/bookings/${itemId}/pay`, { method: 'POST' });\n}\n\n// Admin helpers to fetch specific user's data\nexport function getUserBookings(userId) {\n  return request(`/auth/admin/users/${userId}/bookings`, { method: 'GET' });\n}\n\nexport function getUserWishlist(userId) {\n  return request(`/auth/admin/users/${userId}/wishlist`, { method: 'GET' });\n}\n\n// Chat APIs\nexport function getChatMessages() {\n  return request('/chat', { method: 'GET' });\n}\n\nexport function postChatMessage(payload) {\n  return request('/chat', { method: 'POST', body: JSON.stringify(payload) });\n}\n\n// Trending\nexport function getTrending() {\n  return request('/trending', { method: 'GET' });\n}\n\n// Reviews\nexport function getAllReviews() {\n  return request('/reviews', { method: 'GET' });\n}\n\nexport function createReview(payload) {\n  return request('/reviews', { method: 'POST', body: JSON.stringify(payload) });\n}\n\nexport function deleteReview(id) {\n  return request(`/reviews/${id}`, { method: 'DELETE' });\n}\n\n// Connection/Friend Request APIs\nexport function sendConnectionRequest(recipientId) {\n  return request('/connections/send', { method: 'POST', body: JSON.stringify({ recipientId }) });\n}\n\nexport function acceptConnectionRequest(connectionId) {\n  return request(`/connections/accept/${connectionId}`, { method: 'PUT' });\n}\n\nexport function rejectConnectionRequest(connectionId) {\n  return request(`/connections/reject/${connectionId}`, { method: 'PUT' });\n}\n\nexport function cancelConnectionRequest(connectionId) {\n  return request(`/connections/cancel/${connectionId}`, { method: 'DELETE' });\n}\n\nexport function getPendingRequests() {\n  return request('/connections/pending', { method: 'GET' });\n}\n\nexport function getSentRequests() {\n  return request('/connections/sent', { method: 'GET' });\n}\n\nexport function getFriends() {\n  return request('/connections/friends', { method: 'GET' });\n}\n\nexport function removeFriend(friendId) {\n  return request(`/connections/friend/${friendId}`, { method: 'DELETE' });\n}\n\nexport function getConnectionStatus(otherUserId) {\n  return request(`/connections/status/${otherUserId}`, { method: 'GET' });\n}\n\n// Direct Messages APIs\nexport function sendDirectMessage(recipientId, text) {\n  return request('/direct-messages/send', { \n    method: 'POST', \n    body: JSON.stringify({ recipientId, text }) \n  });\n}\n\nexport function getConversation(otherUserId) {\n  return request(`/direct-messages/conversation/${otherUserId}`, { method: 'GET' });\n}\n\nexport function getConversations() {\n  return request('/direct-messages/conversations', { method: 'GET' });\n}\n\nexport function getUnreadCount() {\n  return request('/direct-messages/unread-count', { method: 'GET' });\n}\n\nexport function markAsRead(otherUserId) {\n  return request(`/direct-messages/mark-read/${otherUserId}`, { method: 'PUT' });\n}\n\nexport function deleteDirectMessage(messageId) {\n  return request(`/direct-messages/${messageId}`, { method: 'DELETE' });\n}","// Client-side bookings service with server fallback\r\nconst KEY = 'nearme_bookings';\r\nimport { getServerBookings, addServerBooking, removeServerBooking } from './api';\r\n\r\nfunction isAuthenticated() {\r\n  return !!localStorage.getItem('token');\r\n}\r\n\r\nfunction parsePrice(priceStr) {\r\n  if (!priceStr) return 0;\r\n  const s = String(priceStr).trim();\r\n  if (/free/i.test(s)) return 0;\r\n  // extract first number sequence (handles ranges like \" 800  1,200\")\r\n  const m = s.replace(/,/g, '').match(/(\\d+)/);\r\n  return m ? Number(m[0]) : 0;\r\n}\r\n\r\nexport function getBookings() {\r\n  // If authenticated, try server first\r\n  if (isAuthenticated()) {\r\n    try {\r\n      // this returns a promise in async contexts; keep sync fallback\r\n      // consumers usually call getBookings synchronously, so use local cache\r\n      const raw = localStorage.getItem(KEY) || '[]';\r\n      return JSON.parse(raw);\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  }\r\n  try {\r\n    const raw = localStorage.getItem(KEY) || '[]';\r\n    return JSON.parse(raw);\r\n  } catch (err) {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function saveBookings(list) {\r\n  localStorage.setItem(KEY, JSON.stringify(list || []));\r\n}\r\n\r\nexport function addBooking(item) {\r\n  if (!item) return;\r\n  // if authenticated, use server API\r\n  if (isAuthenticated()) {\r\n    try {\r\n      const price = parsePrice(item.price);\r\n      const payload = { itemId: String(item.id), title: item.title, img: item.img, duration: item.duration, price: price, priceLabel: item.price };\r\n      return addServerBooking(payload).then(res => {\r\n        // keep local cache in sync\r\n        saveBookings(res.bookings || []);\r\n        return res.bookings || [];\r\n      }).catch(() => {\r\n        // fallback to local\r\n        const bookings = getBookings();\r\n        const exists = bookings.find(b => b.id === item.id);\r\n        if (exists) return bookings;\r\n        const price = parsePrice(item.price);\r\n        const record = { id: item.id, title: item.title, price, priceLabel: item.price, img: item.img, duration: item.duration };\r\n        bookings.push(record);\r\n        saveBookings(bookings);\r\n        return bookings;\r\n      });\r\n    } catch (err) {\r\n      // fallback to local\r\n    }\r\n  }\r\n  if (!item) return;\r\n  const bookings = getBookings();\r\n  // avoid duplicate booking with same id\r\n  const exists = bookings.find(b => b.id === item.id);\r\n  if (exists) return bookings;\r\n  const price = parsePrice(item.price);\r\n  const record = {\r\n    id: item.id,\r\n    title: item.title,\r\n    price,\r\n    priceLabel: item.price,\r\n    img: item.img,\r\n    duration: item.duration\r\n  };\r\n  bookings.push(record);\r\n  saveBookings(bookings);\r\n  return bookings;\r\n}\r\n\r\nexport function removeBooking(id) {\r\n  if (isAuthenticated()) {\r\n    return removeServerBooking(String(id)).then(res => {\r\n      saveBookings(res.bookings || []);\r\n      return res.bookings || [];\r\n    }).catch(() => {\r\n      const bookings = getBookings().filter(b => b.id !== id);\r\n      saveBookings(bookings);\r\n      return bookings;\r\n    });\r\n  }\r\n  const bookings = getBookings().filter(b => b.id !== id);\r\n  saveBookings(bookings);\r\n  return bookings;\r\n}\r\n\r\nexport function clearBookings() {\r\n  saveBookings([]);\r\n}\r\n\r\nexport function getTotal() {\r\n  return getBookings().reduce((s, b) => s + (b.price || 0), 0);\r\n}\r\n\r\nexport default { getBookings, addBooking, removeBooking, clearBookings, getTotal };\r\n","import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst ThemeContext = createContext();\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within ThemeProvider');\n  }\n  return context;\n};\n\nexport const ThemeProvider = ({ children }) => {\n  const [theme, setTheme] = useState(() => {\n    const saved = localStorage.getItem('theme');\n    return saved || 'dark';\n  });\n\n  useEffect(() => {\n    localStorage.setItem('theme', theme);\n    document.documentElement.setAttribute('data-theme', theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'dark' ? 'light' : 'dark');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n","import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { register } from '../services/api';\n\nexport default function Register() {\n  const [form, setForm] = useState({ name: '', email: '', password: '', confirm: '' });\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const navigate = useNavigate();\n\n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    setMsg(null);\n    if (!form.name || !form.email || !form.password) {\n      setMsg('Please fill all fields');\n      return;\n    }\n    if (form.password.length<4) {\n      setMsg('Password must be at least 4 characters');\n      return;\n    }\n    if (form.password !== form.confirm) {\n      setMsg('Passwords do not match');\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await register({ name: form.name, email: form.email, password: form.password });\n      localStorage.setItem('token', res.token);\n      localStorage.setItem('userId', res.user.id);\n      // Navigate to Home after registration\n      navigate('/home');\n    } catch (err) {\n      setMsg(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container form-card\">\n        <div className=\"brand\">\n          <h2 className=\"brand-heading\">Near-me Adventures</h2>\n        </div>\n\n        <h1>Create an account</h1>\n        {msg && <p className=\"msg\" style={{ color: msg.includes('success') ? '#16a34a' : '#ef4444' }}>{msg}</p>}\n        <form onSubmit={onSubmit}>\n          <div className=\"form-group\">\n            <label>Name</label>\n            <input name=\"name\" type=\"text\" value={form.name} onChange={onChange} />\n          </div>\n          <div className=\"form-group\">\n            <label>Email</label>\n            <input name=\"email\" type=\"email\" value={form.email} onChange={onChange} />\n          </div>\n          <div className=\"form-group\">\n            <label>Password</label>\n            <input name=\"password\" type=\"password\" value={form.password} onChange={onChange} />\n          </div>\n          <div className=\"form-group\">\n            <label>Confirm Password</label>\n            <input name=\"confirm\" type=\"password\" value={form.confirm} onChange={onChange} />\n          </div>\n          <button type=\"submit\" disabled={loading}>{loading ? 'Registering...' : 'Register'}</button>\n        </form>\n\n        <div className=\"small\">\n          Already have an account? <Link to=\"/login\">Login</Link>\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { login } from '../services/api';\r\n\r\nexport default function Login() {\r\n  const [form, setForm] = useState({ email: '', password: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [msg, setMsg] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    setMsg(null);\r\n    if (!form.email || !form.password) {\r\n      setMsg('Please fill all fields');\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const res = await login({ email: form.email, password: form.password });\r\n      localStorage.setItem('token', res.token);\r\n      localStorage.setItem('userId', res.user.id);\r\n      // After successful login redirect to Home page\r\n      navigate('/home');\r\n    } catch (err) {\r\n      setMsg(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"container form-card\">\r\n        <div className=\"brand\">\r\n          <h2 className=\"brand-heading\">Near-me Adventures</h2>\r\n        </div>\r\n        <h1>Login</h1>\r\n        {msg && <p className=\"msg\" style={{ color: '#ef4444' }}>{msg}</p>}\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <label>Email</label>\r\n            <input name=\"email\" type=\"email\" value={form.email} onChange={onChange} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Password</label>\r\n            <input name=\"password\" type=\"password\" value={form.password} onChange={onChange} />\r\n          </div>\r\n          <button type=\"submit\" disabled={loading}>{loading ? 'Logging in...' : 'Login'}</button>\r\n        </form>\r\n\r\n        <div className=\"small\">\r\n          Don't have an account? <Link to=\"/register\">Register</Link>\r\n        </div>\r\n\r\n        <div className=\"small\" style={{ marginTop: 8 }}>\r\n          Are you an admin? <Link to=\"/admin-login\">Admin Login</Link>\r\n        </div>\r\n        \r\n        <br></br>\r\n\r\n        <div className=\"small\" style={{ marginTop: 8 }}>\r\n          Mail for profile related help-<br></br><Link to=\"https://mail.google.com/\">nma.admins@gmail.com</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { getProfile } from '../services/api';\r\n\r\nexport default function Home() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        const res = await getProfile();\r\n        setUser(res.user);\r\n      } catch (err) {\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n  }, [navigate]);\r\n\r\n  if (loading) return <div className=\"container\"><p>Loading...</p></div>;\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"brand\">\r\n        <h2 className=\"brand-heading\">Welcome to Near-me Adventures</h2>\r\n        <p style={{ color: 'var(--light-gray)', marginTop: '8px' }}>\r\n          Your gateway to unforgettable local experiences, {user?.name}!\r\n        </p>\r\n      </div>\r\n\r\n      <div style={{ marginTop: '32px' }}>\r\n        <h3 style={{ color: 'var(--soft-ivory)', marginBottom: '16px' }}>Quick Actions</h3>\r\n        <div className=\"home-actions\">\r\n          <div className=\"action-card\">\r\n            <Link to=\"/browse\"><button>Browse Experiences</button></Link>\r\n          </div>\r\n          <div className=\"action-card\">\r\n            <Link to=\"/trending\"><button>Trending Experiences</button></Link>\r\n          </div>\r\n          <div className=\"action-card\">\r\n            <Link to=\"/recommendation\"><button>Get Recommendations</button></Link>\r\n          </div>\r\n          <div className=\"action-card\">\r\n            <Link to=\"/reviews\"><button>View Reviews</button></Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\n\r\nexport default function ConfirmModal({ open, title, message, onConfirm, onCancel }) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"modal-backdrop\">\r\n      <div className=\"modal\">\r\n        <h3>{title}</h3>\r\n        <p>{message}</p>\r\n        <div style={{ display: 'flex', gap: 8, justifyContent: 'flex-end', marginTop: 12 }}>\r\n          <button onClick={onCancel}>Cancel</button>\r\n          <button onClick={onConfirm} className=\"book-button\">Confirm</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useContext, useState, useCallback } from 'react';\r\n\r\nconst NotificationsContext = createContext(null);\r\n\r\nexport function NotificationsProvider({ children }) {\r\n  const [notes, setNotes] = useState([]);\r\n\r\n  const add = useCallback((message, opts = {}) => {\r\n    const id = Date.now() + Math.random();\r\n    const note = { id, message, type: opts.type || 'info', timeout: opts.timeout || 4000 };\r\n    setNotes(n => [note, ...n]);\r\n    if (note.timeout > 0) {\r\n      setTimeout(() => {\r\n        setNotes(n => n.filter(x => x.id !== id));\r\n      }, note.timeout);\r\n    }\r\n    return id;\r\n  }, []);\r\n\r\n  const remove = useCallback((id) => setNotes(n => n.filter(x => x.id !== id)), []);\r\n\r\n  return (\r\n    <NotificationsContext.Provider value={{ notes, add, remove }}>\r\n      {children}\r\n      <div className=\"toast-container\" aria-live=\"polite\">\r\n        {notes.map(n => (\r\n          <div key={n.id} className={`toast toast-${n.type}`}>\r\n            <div className=\"toast-message\">{n.message}</div>\r\n            <button className=\"toast-close\" onClick={() => remove(n.id)}></button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </NotificationsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useNotifications() {\r\n  const ctx = useContext(NotificationsContext);\r\n  if (!ctx) throw new Error('useNotifications must be used within NotificationsProvider');\r\n  return ctx;\r\n}\r\n\r\nexport default NotificationsContext;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { getProfile } from '../services/api';\r\nimport { getBookings, removeBooking, getTotal, addBooking } from '../services/bookings';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport ConfirmModal from '../components/ConfirmModal';\r\nimport { useNotifications } from '../contexts/NotificationsContext';\r\n\r\nexport default function Dashboard() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [sortAsc, setSortAsc] = useState(true);\r\n  const [bookingsSortAsc, setBookingsSortAsc] = useState(true);\r\n  const [pendingRemove, setPendingRemove] = useState(null);\r\n  const [pendingBook, setPendingBook] = useState(null);\r\n  const navigate = useNavigate();\r\n  const { add } = useNotifications();\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        const res = await getProfile();\r\n        setUser(res.user);\r\n      } catch (err) {\r\n        // token invalid or other error -> redirect to login\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    // load bookings from client storage\r\n    setBookings(getBookings());\r\n  }, [navigate]);\r\n\r\n  // load server bookings when authenticated\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function loadServerBookings() {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return;\r\n      try {\r\n        const { getServerBookings } = await import('../services/api');\r\n        const { saveBookings } = await import('../services/bookings');\r\n        const res = await getServerBookings();\r\n        if (!mounted) return;\r\n        // normalize server objects to use id field for consistency\r\n        const list = (res.bookings || []).map(b => ({ id: b.itemId || b.id, title: b.title, img: b.img, duration: b.duration, price: b.price, priceLabel: b.priceLabel, paid: !!b.paid, paymentId: b.paymentId }));\r\n        // persist server bookings to client storage so totals remain across visits\r\n        try { saveBookings(list); } catch (e) { /* ignore */ }\r\n        setBookings(list);\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n    loadServerBookings();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  // load wishlist for dashboard\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function loadWishlist() {\r\n      try {\r\n        const { getWishlist } = await import('../services/api');\r\n        const res = await getWishlist();\r\n        if (!mounted) return;\r\n        setWishlist(res.wishlist || []);\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n    loadWishlist();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const getPriceValue = (item) => {\r\n    if (!item) return 0;\r\n    const v = item.price;\r\n    if (typeof v === 'number') return v;\r\n    if (!v) return 0;\r\n    const parsed = parseFloat(String(v).replace(/[^0-9.]/g, ''));\r\n    return Number.isFinite(parsed) ? parsed : 0;\r\n  };\r\n\r\n  const toggleSort = () => {\r\n    const next = !sortAsc;\r\n    const sorted = [...wishlist].sort((a, b) => {\r\n      const pa = getPriceValue(a);\r\n      const pb = getPriceValue(b);\r\n      return next ? pa - pb : pb - pa;\r\n    });\r\n    setSortAsc(next);\r\n    setWishlist(sorted);\r\n  };\r\n\r\n  const toggleBookingsSort = () => {\r\n    const next = !bookingsSortAsc;\r\n    const sorted = [...bookings].sort((a, b) => {\r\n      const pa = getPriceValue(a);\r\n      const pb = getPriceValue(b);\r\n      return next ? pa - pb : pb - pa;\r\n    });\r\n    setBookingsSortAsc(next);\r\n    setBookings(sorted);\r\n  };\r\n\r\n  const handleRemoveWishlist = async (itemId) => {\r\n    try {\r\n      const { removeWishlist } = await import('../services/api');\r\n      const res = await removeWishlist(itemId);\r\n      setWishlist(res.wishlist || []);\r\n      add('Removed from wishlist', { type: 'info' });\r\n    } catch (err) {\r\n      add('Could not remove from wishlist', { type: 'error' });\r\n    }\r\n  };\r\n\r\n  const openWishlistBooking = (item) => {\r\n    setPendingBook(item);\r\n  };\r\n\r\n  const confirmBook = () => {\r\n    if (!pendingBook) return;\r\n    try {\r\n      const payload = { id: pendingBook.itemId || pendingBook.id || (pendingBook.title + '|' + pendingBook.img), title: pendingBook.title, price: pendingBook.price, img: pendingBook.img, duration: pendingBook.duration };\r\n      const result = addBooking({ id: payload.id, title: payload.title, price: payload.price, img: payload.img, duration: payload.duration });\r\n      if (result && typeof result.then === 'function') {\r\n        result.then(updated => setBookings(updated)).catch(() => add('Could not complete booking', { type: 'error' }));\r\n      } else {\r\n        setBookings(result);\r\n      }\r\n      add(`Booked: ${pendingBook.title}`, { type: 'success', timeout: 3500 });\r\n    } catch (err) {\r\n      add('Could not complete booking', { type: 'error' });\r\n    } finally {\r\n      setPendingBook(null);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"container\"><p>Loading...</p></div>;\r\n\r\n  const handleRemove = (id) => {\r\n    // open confirmation modal with the selected booking\r\n    const item = bookings.find(b => (b.id === id || b.itemId === id)) || { id };\r\n    setPendingRemove(item);\r\n  };\r\n\r\n  const confirmRemove = () => {\r\n    if (!pendingRemove) return;\r\n    const result = removeBooking(pendingRemove.id || pendingRemove.itemId);\r\n    if (result && typeof result.then === 'function') {\r\n      result.then(updated => setBookings(updated)).catch(() => {\r\n        // ignore\r\n      });\r\n    } else {\r\n      setBookings(result);\r\n    }\r\n    add(`Removed booking: ${pendingRemove.title}`, { type: 'info' });\r\n    setPendingRemove(null);\r\n  };\r\n\r\n  const cancelRemove = () => setPendingRemove(null);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\">\r\n        <div className=\"brand\">\r\n          <h2 className=\"brand-heading\">Near-me Adventures</h2>\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <button style={{ marginRight: 8 }} onClick={() => navigate('/')}>Back to Home</button>\r\n          <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n        </div>\r\n      </div>\r\n\r\n      <h1>Your Profile</h1>\r\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 12 }}>\r\n        <div className=\"form-group\">\r\n          <label>Name</label>\r\n          <div>{user?.name}</div>\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Email</label>\r\n          <div>{user?.email}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: 20 }}>\r\n        <h2 style={{ margin: 0 }}>Your Bookings</h2>\r\n        <div>\r\n          <button onClick={toggleBookingsSort} style={{ padding: '6px 10px', marginRight: 8 }}>{bookingsSortAsc ? 'Price ' : 'Price '}</button>\r\n          <button onClick={() => navigate('/payment')} style={{ padding: '6px 10px' }}>Payment</button>\r\n        </div>\r\n      </div>\r\n      {bookings.length === 0 ? (\r\n        <div className=\"container\"><p>No bookings yet. Browse experiences to add.</p></div>\r\n      ) : (\r\n        <div className=\"grid\" style={{ marginTop: 12 }}>\r\n          {bookings.map(b => (\r\n            <div key={b.id} className=\"card-item\">\r\n              <div className=\"card-media\" style={{ backgroundImage: `url(${b.img})` }} />\r\n              <div className=\"card-body\">\r\n                <div style={{ fontWeight: 700 }}>{b.title}</div>\r\n                <div className=\"muted\">{b.duration}</div>\r\n                <div style={{ marginTop: 12 }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <div className=\"muted\">{b.priceLabel ? b.priceLabel : ` ${b.price}`}</div>\r\n                    <div>\r\n                      {b.paid ? <span style={{ color: 'green', marginRight: 8 }}>Paid</span> : null}\r\n                      <button onClick={() => handleRemove(b.id)}>Remove</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginTop: 18 }}>\r\n        <h3>Total: <span style={{ color: 'var(--brand-green)' }}> {getTotal()}</span></h3>\r\n      </div>\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginTop: 20 }}>\r\n        <h2 style={{ margin: 0 }}>Your Wishlist</h2>\r\n        <div>\r\n          <button onClick={toggleSort} style={{ padding: '6px 10px' }}>{sortAsc ? 'Price ' : 'Price '}</button>\r\n        </div>\r\n      </div>\r\n      {wishlist.length === 0 ? (\r\n        <div className=\"container\"><p>No saved experiences.</p></div>\r\n      ) : (\r\n        <div className=\"grid\" style={{ marginTop: 12 }}>\r\n          {wishlist.map(w => (\r\n            <div key={w.itemId} className=\"card-item\">\r\n              <div className=\"card-media\" style={{ backgroundImage: `url(${w.img})` }} />\r\n              <div className=\"card-body\">\r\n                <div style={{ fontWeight: 700 }}>{w.title}</div>\r\n                <div className=\"muted\">{w.duration}</div>\r\n                <div style={{ marginTop: 12, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <div className=\"muted\">{w.price}</div>\r\n                  <div>\r\n                    <button onClick={() => handleRemoveWishlist(w.itemId)} style={{ marginRight: 8 }}>Remove</button>\r\n                    <button onClick={() => openWishlistBooking(w)} disabled={!!bookings.find(b => (b.id === w.itemId || b.itemId === w.itemId || b.title === w.title))}>Book Now</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <ConfirmModal\r\n        open={!!pendingBook}\r\n        title={pendingBook ? `Confirm booking` : 'Confirm booking'}\r\n        message={pendingBook ? `Do you want to book \"${pendingBook.title}\" for ${pendingBook.price || ''}?` : ''}\r\n        onConfirm={confirmBook}\r\n        onCancel={() => setPendingBook(null)}\r\n      />\r\n      <ConfirmModal\r\n        open={!!pendingRemove}\r\n        title=\"Confirm removal\"\r\n        message={pendingRemove ? `Remove \\\"${pendingRemove.title}\\\" from your bookings?` : ''}\r\n        onConfirm={confirmRemove}\r\n        onCancel={cancelRemove}\r\n      />\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAllUsers, deleteUser } from '../services/api';\r\n\r\nexport default function AdminDashboard() {\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [searchBy, setSearchBy] = useState('name');\r\n  const [deletingId, setDeletingId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await getAllUsers();\r\n        if (!mounted) return;\r\n        setUsers(res.users || []);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\" style={{ background: 'black', color: 'white', minHeight: '60vh', padding: 20 }}>\r\n      <div className=\"brand\">\r\n        <h2 className=\"brand-heading\">Near-me Adventures</h2>\r\n      </div>\r\n      <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8, flexDirection: 'column' }}>\r\n        <button onClick={() => navigate('/analysis')} style={{ padding: '6px 10px' }}>Analytics</button>\r\n        <button onClick={() => navigate('/add-experiences')} style={{ padding: '6px 10px', marginTop: 8 }}>Experiences Manage (add/view/filter)</button>\r\n        <button onClick={() => navigate('/admin/reviews')} style={{ padding: '6px 10px', marginTop: 8 }}>Reviews Manage</button>\r\n      </div>\r\n      <h1 style={{ color: 'red' }}>Admin Dashboard</h1>\r\n      <p>Summary for administrators.</p>\r\n\r\n      {loading && <p>Loading users...</p>}\r\n      {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n\r\n      {!loading && !error && (\r\n        <div>\r\n          <p><strong>Total users:</strong> {users.length}</p>\r\n\r\n          <div style={{ marginTop: 12, display: 'flex', gap: 8, alignItems: 'center' }}>\r\n            <select value={searchBy} onChange={e => setSearchBy(e.target.value)} style={{ padding: 8, borderRadius: 8 }}>\r\n              <option value=\"name\">Name</option>\r\n              <option value=\"email\">Email</option>\r\n            </select>\r\n            <input\r\n              placeholder={searchBy === 'email' ? 'Search by email' : 'Search by name'}\r\n              value={search}\r\n              onChange={e => setSearch(e.target.value)}\r\n              style={{ padding: 8, width: '100%', maxWidth: 400, borderRadius: 8 }}\r\n            />\r\n            <button onClick={() => setSearch('')} style={{ padding: 8, borderRadius: 8 }}>Clear</button>\r\n          </div>\r\n\r\n          <div style={{ overflowX: 'auto', marginTop: 12 }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', color: 'white' }}>\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Name</th>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Email</th>\r\n                  \r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {users\r\n                  .filter(u => {\r\n                    if (!search) return true;\r\n                    const q = search.toLowerCase();\r\n                    if (searchBy === 'email') return (u.email || '').toLowerCase().includes(q);\r\n                    return (u.name || '').toLowerCase().includes(q);\r\n                  })\r\n                  .map(u => (\r\n                  <tr key={u._id}>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>{u.name}</td>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>{u.email}</td>\r\n                    \r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>\r\n                      <button\r\n                        onClick={async () => {\r\n                          if (!window.confirm(`Delete user ${u.name} (${u.email})?`)) return;\r\n                          try {\r\n                            setDeletingId(u._id);\r\n                            await deleteUser(u._id);\r\n                            setUsers(prev => prev.filter(x => x._id !== u._id));\r\n                          } catch (err) {\r\n                            alert(err.message || 'Delete failed');\r\n                          } finally {\r\n                            setDeletingId(null);\r\n                          }\r\n                        }}\r\n                        disabled={deletingId === u._id}\r\n                        style={{ background: '#c0392b', color: 'white', border: 'none', padding: '6px 10px', cursor: 'pointer' }}\r\n                      >{deletingId === u._id ? 'Deleting...' : 'Delete'}</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nexport default function AdminLogin() {\r\n  const [form, setForm] = useState({ email: '', password: '' });\r\n  const [msg, setMsg] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const onSubmit = async e => {\r\n    e.preventDefault();\r\n    setMsg(null);\r\n    if (!form.email || !form.password) return setMsg('Please fill all fields');\r\n    setLoading(true);\r\n    try {\r\n      // Simple client-side admin credential check\r\n      if (form.email === 'admin@gmail.com' && form.password === 'admin123') {\r\n        // set a token so RequireAuth can allow access\r\n        localStorage.setItem('token', 'admin-token');\r\n        navigate('/admin');\r\n      } else {\r\n        setMsg('Invalid admin credentials');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"container form-card\">\r\n        <div className=\"brand\">\r\n          <h2 className=\"brand-heading\">Near-me Adventures</h2>\r\n        </div>\r\n        <h1>Admin Login</h1>\r\n        {msg && <p className=\"msg\" style={{ color: '#ef4444' }}>{msg}</p>}\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <label>Email</label>\r\n            <input name=\"email\" type=\"email\" value={form.email} onChange={onChange} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Password</label>\r\n            <input name=\"password\" type=\"password\" value={form.password} onChange={onChange} />\r\n          </div>\r\n          <button type=\"submit\" disabled={loading}>{loading ? 'Logging in...' : 'Login as Admin'}</button>\r\n        </form>\r\n\r\n        <div className=\"small\">\r\n          Back to <Link to=\"/login\">User Login</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { addBooking, getBookings } from '../services/bookings';\r\nimport ConfirmModal from './ConfirmModal';\r\nimport { useNotifications } from '../contexts/NotificationsContext';\r\nimport { getWishlist, addWishlist, removeWishlist } from '../services/api';\r\n\r\nexport default function Card({ id, img, title, desc, duration, price, rating }) {\r\n  const [added, setAdded] = useState(false);\r\n  const [wishlisted, setWishlisted] = useState(false);\r\n\r\n  // when clicking book, add to local bookings and mark added\r\n  const onBook = () => {\r\n    // open confirmation modal\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  // disable if already booked\r\n  React.useEffect(() => {\r\n    let mounted = true;\r\n    const token = localStorage.getItem('token');\r\n    async function check() {\r\n      try {\r\n        if (token) {\r\n          const { getServerBookings } = await import('../services/api');\r\n          const res = await getServerBookings();\r\n          if (!mounted) return;\r\n          const list = res.bookings || [];\r\n          const exists = list.find(b => (b.itemId === String(id) || b.itemId === String(title) || b.id === id));\r\n          if (exists) setAdded(true);\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        // ignore and fallback to local\r\n      }\r\n      const existsLocal = getBookings().find(b => b.title === title || b.id === id || b.itemId === String(id));\r\n      if (existsLocal && mounted) setAdded(true);\r\n    }\r\n    check();\r\n    return () => { mounted = false; };\r\n  }, [title, id]);\r\n\r\n  // check wishlist status\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await getWishlist();\r\n        if (!mounted) return;\r\n        const list = res.wishlist || [];\r\n        const exists = list.find(i => i.itemId === String(id) || i.title === title);\r\n        if (exists) setWishlisted(true);\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [title]);\r\n\r\n  const { add } = useNotifications();\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n\r\n  const confirmBooking = () => {\r\n    const payload = { id: id || (title + '|' + img), title, price, img, duration };\r\n    try {\r\n      const result = addBooking({ id: payload.id, title: payload.title, price: payload.priceLabel || payload.price, img: payload.img, duration: payload.duration });\r\n      if (result && typeof result.then === 'function') {\r\n        result.then(() => setAdded(true)).catch(() => add('Could not complete booking', { type: 'error' }));\r\n      } else {\r\n        setAdded(true);\r\n      }\r\n      add(`Booked: ${title}`, { type: 'success', timeout: 3500 });\r\n    } catch (err) {\r\n      add('Could not complete booking', { type: 'error' });\r\n    } finally {\r\n      setShowConfirm(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card-item\">\r\n      <div className=\"card-media\" style={{ backgroundImage: `url(${img})` }} />\r\n      <div className=\"card-body\">\r\n        <div className=\"card-title\">{title}</div>\r\n        <div className=\"card-desc muted\">{desc}</div>\r\n        <div style={{ marginTop: 'auto' }}>\r\n          <div className=\"card-row\">\r\n            <div className=\"muted card-meta\">{duration}</div>\r\n            <div className=\"muted card-meta\">{price}</div>\r\n          </div>\r\n          <div className=\"card-row\" style={{ marginTop: 8 }}>\r\n            <div className=\"muted\"> {rating}</div>\r\n            <div style={{ display: 'flex', gap: 8 }}>\r\n              <button className=\"book-button\" onClick={onBook} disabled={added}>{added ? 'Booked' : 'Book Now'}</button>\r\n              <button\r\n                className=\"book-button wishlist-button\"\r\n                onClick={async () => {\r\n                  try {\r\n                    if (!wishlisted) {\r\n                      await addWishlist({ itemId: String(id), title, img, duration, price });\r\n                      setWishlisted(true);\r\n                      add(`Saved to wishlist: ${title}`, { type: 'success' });\r\n                    } else {\r\n                      await removeWishlist(String(id));\r\n                      setWishlisted(false);\r\n                      add(`Removed from wishlist: ${title}`, { type: 'info' });\r\n                    }\r\n                  } catch (err) {\r\n                    add('Could not update wishlist', { type: 'error' });\r\n                  }\r\n                }}\r\n              >{wishlisted ? 'Saved' : 'Save'}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ConfirmModal\r\n        open={showConfirm}\r\n        title={`Confirm booking`}\r\n        message={`Do you want to book \"${title}\" for ${price}?`}\r\n        onConfirm={confirmBooking}\r\n        onCancel={() => setShowConfirm(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","const sample = [\r\n  {\r\n    id: 1,\r\n    title: 'Ahsan Manzil (Pink Palace)',\r\n    desc: 'A beautifully restored Mughal-style palace museum by the Buriganga River.',\r\n    duration: '12 hours',\r\n    price: 'Free',\r\n    rating: 4.6,\r\n    img: 'https://upload.wikimedia.org/wikipedia/commons/1/16/Ahsan_Manzil-Front_View.jpg'\r\n  },\r\n  {\r\n    id: 2,\r\n    title: 'Lalbagh Fort',\r\n    desc: 'A historic 17th-century Mughal fortress featuring gardens and gateways.',\r\n    duration: '1-3 hours',\r\n    price: ' 20',\r\n    rating: 4.5,\r\n    img: 'https://images.pexels.com/photos/17830385/pexels-photo-17830385.jpeg'\r\n  },\r\n  {\r\n    id: 3,\r\n    title: 'Shilpakala Academy',\r\n    desc: 'A vibrant cultural center hosting theatre, dance and art exhibitions.',\r\n    duration: '2 hours',\r\n    price: ' 300',\r\n    rating: 4.7,\r\n    img: 'https://upload.wikimedia.org/wikipedia/commons/b/b5/Dhaka_Art_Summit_2023.jpg'\r\n  },\r\n  {\r\n    id: 4,\r\n    title: 'Prana Yoga Studio',\r\n    desc: 'Boutique yoga studio offering Vinyasa flow classes and workshops.',\r\n    duration: '1 hours',\r\n    price: ' 1200',\r\n    rating: 4.7,\r\n    img: 'https://images.pexels.com/photos/1051838/pexels-photo-1051838.jpeg'\r\n  },\r\n  {\r\n    id: 5,\r\n    title: 'Cooking Class',\r\n    desc: 'Hands-on Bengali cooking class teaching biryani, bhorta and sweets.',\r\n    duration: '3 hours',\r\n    price: ' 1200',\r\n    rating: 4.6,\r\n    img: 'https://images.pexels.com/photos/2284166/pexels-photo-2284166.jpeg'\r\n  },\r\n  {\r\n    id: 6,\r\n    title: 'Purbachal Cycling Trail',\r\n    desc: 'A scenic lakeside cycling route with smooth paths and fresh air.',\r\n    duration: '1 hours',\r\n    price: 'Free',\r\n    rating: 4.5,\r\n    img: 'https://images.pexels.com/photos/35100311/pexels-photo-35100311.jpeg'\r\n  }\r\n];\r\n\r\nexport default sample;\r\n","import React, { useState, useMemo } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Card from '../components/Card';\r\nimport sample from '../data/places';\r\n\r\nexport default function Browse() {\r\n  const navigate = useNavigate();\r\n  const [sortAsc, setSortAsc] = useState(true);\r\n\r\n  const parsePrice = (priceStr) => {\r\n    if (!priceStr) return 0;\r\n    const s = String(priceStr).trim();\r\n    if (/free/i.test(s)) return 0;\r\n    // remove commas and non-numeric/dot/- characters, handle ranges by taking first number\r\n    const cleaned = s.replace(/,/g, '').replace(/[^0-9.\\-]/g, ' ');\r\n    const m = cleaned.match(/(\\d+[\\d\\.]*)/);\r\n    return m ? Number(m[0]) : 0;\r\n  };\r\n\r\n  const displayed = useMemo(() => {\r\n    const list = sample.slice();\r\n    return list.sort((a, b) => {\r\n      const pa = parsePrice(a.price);\r\n      const pb = parsePrice(b.price);\r\n      return sortAsc ? pa - pb : pb - pa;\r\n    });\r\n  }, [sortAsc]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\">\r\n        <div className=\"brand\">\r\n          <h2 className=\"brand-heading\">Browse Experiences</h2>\r\n          <h4 style={{ color: 'var(--light-gray)', fontWeight: 400 }}>Discover unique activities around you (Premium and best ones)</h4>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"search-row\">\r\n        <button onClick={() => setSortAsc(s => !s)} style={{ padding: '8px 10px', borderRadius: 8 }}>\r\n          {sortAsc ? 'Price ' : 'Price '}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid\">\r\n        {displayed.length > 0 ? (\r\n          displayed.map(item => (\r\n            <Card key={item.id} {...item} />\r\n          ))\r\n        ) : (\r\n          <div className=\"container\">\r\n            <p>No experiences found.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Card from '../components/Card';\r\nimport sample from '../data/places';\r\n\r\nconst KEY = 'all_places';\r\n\r\nexport default function AllPlaces() {\r\n  const navigate = useNavigate();\r\n  const [refresh, setRefresh] = useState(0);\r\n  const [search, setSearch] = useState('');\r\n  const [searchBy, setSearchBy] = useState('title');\r\n  const [sortAsc, setSortAsc] = useState(true);\r\n\r\n  const created = useMemo(() => {\r\n    try {\r\n      const raw = localStorage.getItem(KEY) || '[]';\r\n      return JSON.parse(raw);\r\n    } catch (e) { return []; }\r\n  }, [refresh]);\r\n\r\n  const all = [...sample, ...created];\r\n\r\n  const parsePrice = (priceStr) => {\r\n    if (!priceStr) return 0;\r\n    const s = String(priceStr).trim();\r\n    if (/free/i.test(s)) return 0;\r\n    const cleaned = s.replace(/,/g, '').replace(/[^0-9.\\-]/g, ' ');\r\n    const m = cleaned.match(/(\\d+[\\d\\.]*)/);\r\n    return m ? Number(m[0]) : 0;\r\n  };\r\n\r\n  const filtered = useMemo(() => {\r\n    const term = search.trim().toLowerCase();\r\n    let list = all.slice();\r\n    if (term) {\r\n      list = list.filter(item => {\r\n        if (searchBy === 'duration') return (item.duration || '').toLowerCase().includes(term);\r\n        if (searchBy === 'price') {\r\n          // If the search term is a number, show items with numeric price <= search number\r\n          if (/^\\d+(?:\\.\\d+)?$/.test(term)) {\r\n            const searchNum = Number(term);\r\n            const itemPrice = parsePrice(item.price);\r\n            return Number.isFinite(itemPrice) && itemPrice <= searchNum;\r\n          }\r\n          return String(parsePrice(item.price)).toLowerCase().includes(term) || (item.price || '').toLowerCase().includes(term);\r\n        }\r\n        // default: title\r\n        return (item.title || '').toLowerCase().includes(term);\r\n      });\r\n    }\r\n    return list.sort((a, b) => {\r\n      const pa = parsePrice(a.price);\r\n      const pb = parsePrice(b.price);\r\n      return sortAsc ? pa - pb : pb - pa;\r\n    });\r\n  }, [all, search, searchBy, sortAsc]);\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\">\r\n        <div className=\"brand\">\r\n          <h2 className=\"brand-heading\">All Places</h2>\r\n          <p>Explore all available places and experiences</p>\r\n        </div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <button onClick={() => navigate(-1)}>Back</button>\r\n          <button style={{ marginLeft: 2 }} onClick={() => navigate('/dashboard')}>User's Dashboard</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12, display: 'flex', gap: 8, alignItems: 'center' }}>\r\n        <select value={searchBy} onChange={e => setSearchBy(e.target.value)} style={{ padding: 8, borderRadius: 8 }}>\r\n          <option value=\"title\">Title</option>\r\n          <option value=\"duration\">Duration</option>\r\n          <option value=\"price\">Price</option>\r\n        </select>\r\n        <input\r\n          placeholder={searchBy === 'price' ? 'Search by price' : searchBy === 'duration' ? 'Search by duration' : 'Search by title'}\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n          style={{ padding: 8, width: '100%', maxWidth: 400, borderRadius: 8 }}\r\n        />\r\n        <button onClick={() => setSearch('')} style={{ padding: 8, borderRadius: 8 }}>Clear</button>\r\n        <button onClick={() => setSortAsc(s => !s)} style={{ marginLeft: 8, padding: '8px 10px', borderRadius: 8 }}>\r\n          {sortAsc ? 'Price ' : 'Price '}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid\" style={{ marginTop: 12 }}>\r\n        {filtered.length > 0 ? (\r\n          filtered.map(item => <Card key={item.id || item._id || item.title} {...item} />)\r\n        ) : (\r\n          <div className=\"container\">\r\n            <p>No places available.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAllUsers } from '../services/api';\r\n\r\nexport default function Analysis() {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [search, setSearch] = useState('');\r\n  const [searchBy, setSearchBy] = useState('name');\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await getAllUsers();\r\n        if (!mounted) return;\r\n        setUsers(res.users || []);\r\n      } catch (err) {\r\n        setError(err.message || 'Failed to load users');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container admin-container\" style={{ background: 'black', color: 'white', minHeight: '60vh', padding: 20 }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div className=\"brand\"><h2 className=\"brand-heading\">Analytics</h2></div>\r\n        <div>\r\n          <button className=\"back-btn\" onClick={() => navigate('/admin')}>Back</button>\r\n        </div>\r\n      </div>\r\n      <h1 style={{ color: 'crimson' }}>Users</h1>\r\n      <div style={{ display: 'flex', gap: 8, marginBottom: 12, alignItems: 'center' }}>\r\n        <select value={searchBy} onChange={e => setSearchBy(e.target.value)} style={{ padding: '8px 10px', borderRadius: 8 }}>\r\n          <option value=\"name\">Name</option>\r\n          <option value=\"email\">Email</option>\r\n        </select>\r\n        <input\r\n          placeholder={`Search by ${searchBy}`}\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n          style={{ padding: '8px 10px', borderRadius: 8, flex: 1 }}\r\n        />\r\n        <button onClick={() => setSearch('')} style={{ padding: '8px 10px', borderRadius: 8 }}>Clear</button>\r\n      </div>\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n      {!loading && !error && (\r\n        <div style={{ display: 'grid', gap: 8 }}>\r\n          {users\r\n            .filter(u => {\r\n              if (!search) return true;\r\n              const q = search.toLowerCase();\r\n              if (searchBy === 'email') return (u.email || '').toLowerCase().includes(q);\r\n              return (u.name || '').toLowerCase().includes(q);\r\n            })\r\n            .map(u => (\r\n              <button key={u._id} className=\"admin-btn\" onClick={() => navigate(`/analysis/${u._id}`)} style={{ textAlign: 'left', padding: 10 }}>\r\n                {u.name} : {u.email}\r\n              </button>\r\n            ))}\r\n        </div>\r\n      )}\r\n      <div style={{ marginTop: 16 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getUserBookings, getUserWishlist } from '../services/api';\r\n\r\nexport default function UserAnalysis() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [bookings, setBookings] = useState([]);\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const [bRes, wRes] = await Promise.all([getUserBookings(id), getUserWishlist(id)]);\r\n        if (!mounted) return;\r\n        setBookings(bRes.bookings || []);\r\n        setWishlist(wRes.wishlist || []);\r\n      } catch (err) {\r\n        setError(err.message || 'Failed to load user data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className=\"container admin-container\" style={{ background: 'black', color: 'white', minHeight: '60vh', padding: 20 }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div className=\"brand\"><h2 className=\"brand-heading\">User Analytics</h2></div>\r\n        <div>\r\n          <button className=\"back-btn\" onClick={() => navigate('/analysis')}>Back</button>\r\n          <button className=\"back-btn\" onClick={() => navigate('/admin')}>Admin Dashboard</button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading && <p>Loading user data...</p>}\r\n      {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n\r\n      <h3>Bookings</h3>\r\n      {bookings.length === 0 ? <p>No bookings</p> : (\r\n        <div style={{ display: 'grid', gap: 8 }}>\r\n          {bookings.map(b => (\r\n            <div key={b.itemId || b.id} style={{ border: '1px solid #ddd', padding: 8 }}>\r\n              <div style={{ fontWeight: 700 }}>{b.title}</div>\r\n              <div className=\"muted\">{b.duration}</div>\r\n              <div className=\"muted\">{b.priceLabel ? b.priceLabel : ` ${b.price}`}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <h3 style={{ marginTop: 16 }}>Wishlist</h3>\r\n      {wishlist.length === 0 ? <p>No wishlist items</p> : (\r\n        <div style={{ display: 'grid', gap: 8 }}>\r\n          {wishlist.map(w => (\r\n            <div key={w.itemId} style={{ border: '1px solid #ddd', padding: 8 }}>\r\n              <div style={{ fontWeight: 700 }}>{w.title}</div>\r\n              <div className=\"muted\">{w.duration}</div>\r\n              <div className=\"muted\">{w.price}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div style={{ marginTop: 16 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { getTrending } from '../services/api';\r\n\r\nexport default function TrendingExperiences() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState({ topBooked: [], topWishlisted: [] });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await getTrending();\r\n        if (mounted) setData(res);\r\n      } catch (err) {\r\n        console.error('Failed to load trending:', err);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  if (loading) return <div className=\"container\"><p>Loading trending experiences...</p></div>;\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\">\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <h2>Trending Experiences</h2>\r\n        </div>\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n            <button onClick={() => navigate('/home')}>Back to Home</button>\r\n            <Link to=\"/browse\"><button>Browse Experiences</button></Link>\r\n        </div>\r\n      </div>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <p>Discover the most popular experiences right now!!</p>\r\n      </div>\r\n\r\n      <div className=\"trending-sections\">\r\n        <div className=\"trending-column\">\r\n          <h3>Top 3 Most Booked</h3>\r\n          {data.topBooked.length === 0 && <div className=\"muted\">No bookings yet</div>}\r\n          {data.topBooked.map((it) => (\r\n            <div\r\n              key={it.itemId}\r\n              className=\"card small-card\"\r\n              style={{ display: 'flex', alignItems: 'center', gap: 12, border: '1px solid #e6e6e6', padding: 8, borderRadius: 8 }}\r\n            >\r\n              {it.img ? (\r\n                <img\r\n                  src={it.img}\r\n                  alt={it.title}\r\n                  style={{ width: 96, height: 64, objectFit: 'cover', borderRadius: 6 }}\r\n                />\r\n              ) : (\r\n                <div style={{ width: 96, height: 64, background: '#eee', borderRadius: 6 }} />\r\n              )}\r\n              <div style={{ flex: 1 }}>\r\n                <div className=\"card-title\">{it.title}</div>\r\n              </div>\r\n              <div style={{ fontWeight: 600 }} className=\"muted\">{it.count} times</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"trending-column\">\r\n          <h3>Top 3 Most Wishlisted</h3>\r\n          {data.topWishlisted.length === 0 && <div className=\"muted\">No wishlists yet</div>}\r\n          {data.topWishlisted.map((it) => (\r\n            <div\r\n              key={it.itemId}\r\n              className=\"card small-card\"\r\n              style={{ display: 'flex', alignItems: 'center', gap: 12, border: '1px solid #e6e6e6', padding: 8, borderRadius: 8 }}\r\n            >\r\n              {it.img ? (\r\n                <img\r\n                  src={it.img}\r\n                  alt={it.title}\r\n                  style={{ width: 96, height: 64, objectFit: 'cover', borderRadius: 6 }}\r\n                />\r\n              ) : (\r\n                <div style={{ width: 96, height: 64, background: '#eee', borderRadius: 6 }} />\r\n              )}\r\n              <div style={{ flex: 1 }}>\r\n                <div className=\"card-title\">{it.title}</div>\r\n              </div>\r\n              <div style={{ fontWeight: 600 }} className=\"muted\">{it.count} users</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function AddExperiences() {\r\n  const navigate = useNavigate();\r\n  const [title, setTitle] = useState('');\r\n  const [desc, setDesc] = useState('');\r\n  const [duration, setDuration] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [img, setImg] = useState('');\r\n  const [rating, setRating] = useState(0);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // placeholder: in future send to API\r\n    const place = { id: Date.now(), title, desc, duration, price, img, rating: Number(rating) || 0 };\r\n    try {\r\n      const raw = localStorage.getItem('all_places') || '[]';\r\n      const arr = JSON.parse(raw);\r\n      arr.push(place);\r\n      localStorage.setItem('all_places', JSON.stringify(arr));\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n    alert(`Created experience: ${title}`);\r\n    // reset\r\n    setTitle(''); setDesc(''); setDuration(''); setPrice(''); setImg(''); setRating(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container admin-container\" style={{ background: 'black', color: 'white', minHeight: '60vh', padding: 20 }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div className=\"brand\"><h2 className=\"brand-heading\">Add Experiences</h2></div>\r\n        <div>\r\n          <button className=\"back-btn\" onClick={() => navigate('/admin')}>Back</button>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} style={{ marginTop: 12 }}>\r\n        <div style={{ marginBottom: 8 }}>\r\n          <label style={{ display: 'block', marginBottom: 6 }}>Title</label>\r\n          <input value={title} onChange={e => setTitle(e.target.value)} style={{ width: '100%', padding: 8, borderRadius: 8 }} />\r\n        </div>\r\n        <div style={{ marginBottom: 8 }}>\r\n          <label style={{ display: 'block', marginBottom: 6 }}>Description</label>\r\n          <textarea value={desc} onChange={e => setDesc(e.target.value)} style={{ width: '100%', padding: 8, borderRadius: 8 }} />\r\n        </div>\r\n        <div style={{ display: 'flex', gap: 8, marginBottom: 8 }}>\r\n          <input placeholder=\"Duration\" value={duration} onChange={e => setDuration(e.target.value)} style={{ flex: 1, padding: 8, borderRadius: 8 }} />\r\n        </div>\r\n        <div style={{ display: 'flex', gap: 8, marginBottom: 8 }}>\r\n          <input placeholder=\"Price\" value={price} onChange={e => setPrice(e.target.value)} style={{ flex: 1, padding: 8, borderRadius: 8 }} />\r\n          <input placeholder=\"Rating\" type=\"number\" min=\"0\" max=\"5\" step=\"0.1\" value={rating} onChange={e => setRating(e.target.value)} style={{ flex: 1, padding: 8, borderRadius: 8 }} />\r\n        </div>\r\n        <div style={{ marginBottom: 8 }}>\r\n          <label style={{ display: 'block', marginBottom: 6 }}>Image URL</label>\r\n          <input value={img} onChange={e => setImg(e.target.value)} placeholder=\"https://...\" style={{ width: '100%', padding: 8, borderRadius: 8 }} />\r\n        </div>\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n          <button type=\"submit\" style={{ background: 'var(--brand-green)', color: 'white', padding: '8px 12px', borderRadius: 8 }}>Create</button>\r\n          <button type=\"button\" onClick={() => navigate('/created-experiences')} style={{ padding: '8px 12px', borderRadius: 8 }}>View Experiences</button>\r\n        </div>\r\n      <div style={{ marginTop: 12 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function CreatedExperiences() {\r\n  const navigate = useNavigate();\r\n  const [places, setPlaces] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [search, setSearch] = useState('');\r\n  const [deletingId, setDeletingId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoading(true);\r\n      const raw = localStorage.getItem('all_places') || '[]';\r\n      const arr = JSON.parse(raw);\r\n      setPlaces(Array.isArray(arr) ? arr : []);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load places');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleDelete = async (id, title) => {\r\n    if (!window.confirm(`Delete experience ${title}?`)) return;\r\n    try {\r\n      setDeletingId(id);\r\n      const raw = localStorage.getItem('all_places') || '[]';\r\n      const arr = JSON.parse(raw).filter(p => p.id !== id && p._id !== id);\r\n      localStorage.setItem('all_places', JSON.stringify(arr));\r\n      setPlaces(arr);\r\n    } catch (err) {\r\n      alert(err.message || 'Delete failed');\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const filtered = places.filter(p => {\r\n    if (!search) return true;\r\n    const q = search.toLowerCase().trim();\r\n    // If the query is purely numeric, match exact numeric price only\r\n    if (/^\\d+(?:\\.\\d+)?$/.test(q)) {\r\n      const searchNum = parseFloat(q);\r\n      const raw = p.price;\r\n      let pNum = null;\r\n      if (typeof raw === 'number') pNum = raw;\r\n      else if (typeof raw === 'string') {\r\n        const m = raw.replace(/,/g, '').match(/(\\d+(?:\\.\\d+)?)/);\r\n        if (m) pNum = parseFloat(m[0]);\r\n      }\r\n      return pNum !== null && Number(pNum) === Number(searchNum);\r\n    }\r\n    return (p.title || '').toLowerCase().includes(q) || (p.duration || '').toLowerCase().includes(q) || (p.price || '').toLowerCase().includes(q);\r\n  });\r\n\r\n  return (\r\n    <div className=\"container admin-container\" style={{ background: 'black', color: 'white', minHeight: '60vh', padding: 20 }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <div className=\"brand\"><h2 className=\"brand-heading\">Created Experiences</h2></div>\r\n        <div>\r\n          <button className=\"back-btn\" onClick={() => navigate('/add-experiences')}>Back</button>\r\n          <button className=\"back-btn\" onClick={() => navigate('/admin')}>Admin Dashboard</button>\r\n        </div>\r\n      </div>\r\n\r\n      <p>Only experiences created via the admin form.</p>\r\n\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n\r\n      {!loading && (\r\n        <div>\r\n          <div style={{ marginTop: 12, display: 'flex', gap: 8, alignItems: 'center' }}>\r\n            <input\r\n              placeholder=\"Search by title, price or duration\"\r\n              value={search}\r\n              onChange={e => setSearch(e.target.value)}\r\n              style={{ padding: 8, width: '100%', maxWidth: 400, borderRadius: 8 }}\r\n            />\r\n            <button onClick={() => setSearch('')} style={{ padding: 8, borderRadius: 8 }}>Clear</button>\r\n          </div>\r\n\r\n          <div style={{ overflowX: 'auto', marginTop: 12 }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse', color: 'white' }}>\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Title</th>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Price</th>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Duration</th>\r\n                  <th style={{ textAlign: 'left', borderBottom: '1px solid #444', padding: 8 }}>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.length === 0 && (\r\n                  <tr><td colSpan={4} style={{ padding: 8 }}>No experiences found.</td></tr>\r\n                )}\r\n                {filtered.map(p => (\r\n                  <tr key={p.id || p._id}>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>{p.title}</td>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>{p.price}</td>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>{p.duration}</td>\r\n                    <td style={{ padding: 8, borderBottom: '1px solid #222' }}>\r\n                      <button\r\n                        onClick={() => handleDelete(p.id || p._id, p.title)}\r\n                        disabled={deletingId === (p.id || p._id)}\r\n                        style={{ background: '#c0392b', color: 'white', border: 'none', padding: '6px 10px', cursor: 'pointer' }}\r\n                      >{deletingId === (p.id || p._id) ? 'Deleting...' : 'Delete'}</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { getChatMessages, postChatMessage } from '../services/api';\r\nimport { useNotifications } from '../contexts/NotificationsContext';\r\nimport '../styles/chat.css';\r\n\r\nexport default function Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [text, setText] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const listRef = useRef(null);\r\n  const { add } = useNotifications();\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await getChatMessages();\r\n        if (!mounted) return;\r\n        setMessages(prev => {\r\n          const prevCount = Array.isArray(prev) ? prev.length : 0;\r\n          const newList = res.messages || [];\r\n          const newCount = Array.isArray(newList) ? newList.length : 0;\r\n          if (newCount > prevCount) {\r\n            try { window.dispatchEvent(new CustomEvent('chat:new-message', { detail: { added: newCount - prevCount } })); } catch (e) { /* ignore */ }\r\n          }\r\n          return newList;\r\n        });\r\n      } catch (err) {\r\n        add('Could not load chat messages', { type: 'error' });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    const iv = setInterval(load, 3000);\r\n    return () => { mounted = false; clearInterval(iv); };\r\n  }, [add]);\r\n\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      listRef.current.scrollTop = listRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  const send = async () => {\r\n    if (!text.trim()) return;\r\n    const payload = { text: text.trim() };\r\n    try {\r\n      const res = await postChatMessage(payload);\r\n      setText('');\r\n      if (res && res.message) {\r\n        setMessages(prev => prev.concat(res.message));\r\n      } else {\r\n        const fresh = await getChatMessages();\r\n        setMessages(fresh.messages || []);\r\n      }\r\n    } catch (err) {\r\n      add('Failed to send message', { type: 'error' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"brand\">\r\n        <h2 className=\"brand-heading\">Community Chat</h2>\r\n      </div>\r\n      <p style={{ textAlign: 'center', color: 'var(--text-secondary)', marginBottom: '20px' }}>\r\n        Connect with fellow adventurers! Share tips, ask questions, and plan your next near-me adventure together.\r\n      </p>\r\n\r\n      <div className=\"chat-container\" ref={listRef}>\r\n        {loading ? (\r\n          <p style={{ color: 'var(--text-primary)' }}>Loading messages...</p>\r\n        ) : messages.length === 0 ? (\r\n          <p style={{ color: 'var(--text-primary)' }}>No messages yet. Say hello!</p>\r\n        ) : (\r\n          messages.map(m => (\r\n            <div key={m._id || m.id} className=\"chat-message\">\r\n              <div className=\"chat-message-sender\">\r\n                {m.senderName || (m.sender && (m.sender.name || m.sender.email))}\r\n              </div>\r\n              <div className=\"chat-message-text\">{m.text}</div>\r\n              <div className=\"chat-message-time\">\r\n                {new Date(m.createdAt).toLocaleString()}\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"chat-input-container\">\r\n        <input \r\n          className=\"chat-input\"\r\n          value={text} \r\n          onChange={e => setText(e.target.value)} \r\n          onKeyPress={e => e.key === 'Enter' && send()}\r\n          placeholder=\"Write a message...\" \r\n        />\r\n        <button className=\"chat-send-button\" onClick={send}>Send</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport { getBookings as getClientBookings, saveBookings, removeBooking } from '../services/bookings';\r\nimport * as api from '../services/api';\r\nimport { useNotifications } from '../contexts/NotificationsContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Payment() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sortAsc, setSortAsc] = useState(true);\r\n  const { add } = useNotifications();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      setLoading(true);\r\n      try {\r\n        const local = getClientBookings() || [];\r\n        setBookings(local);\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n          try {\r\n            const res = await api.getServerBookings();\r\n            const list = (res.bookings || []).map(b => ({ id: b.itemId || b.id, title: b.title, img: b.img, duration: b.duration, price: b.price, priceLabel: b.priceLabel, paid: !!b.paid, paymentId: b.paymentId }));\r\n            if (!mounted) return;\r\n            setBookings(list);\r\n            try { saveBookings(list); } catch (e) { /* ignore */ }\r\n          } catch (err) {\r\n            // ignore server errors\r\n          }\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  const handlePay = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return add('Please login to make payment', { type: 'error' });\r\n      const res = await api.payBooking(id);\r\n      // update local state\r\n      const updated = (res.bookings || []).map(b => ({ id: b.itemId || b.id, title: b.title, img: b.img, duration: b.duration, price: b.price, priceLabel: b.priceLabel, paid: !!b.paid, paymentId: b.paymentId }));\r\n      setBookings(updated);\r\n      try { saveBookings(updated); } catch (e) { /* ignore */ }\r\n      add('Payment successful', { type: 'success' });\r\n    } catch (err) {\r\n      add('Payment failed', { type: 'error' });\r\n    }\r\n  };\r\n\r\n  const handleMarkDone = (id) => {\r\n    try {\r\n      const result = removeBooking(id);\r\n      if (result && typeof result.then === 'function') {\r\n        result.then(updated => {\r\n          setBookings(updated);\r\n          try { saveBookings(updated); } catch (e) { /* ignore */ }\r\n          add('Booking marked done', { type: 'info' });\r\n        }).catch(() => add('Could not remove booking', { type: 'error' }));\r\n      } else {\r\n        setBookings(result);\r\n        try { saveBookings(result); } catch (e) { /* ignore */ }\r\n        add('Booking marked done', { type: 'info' });\r\n      }\r\n    } catch (err) {\r\n      add('Could not remove booking', { type: 'error' });\r\n    }\r\n  };\r\n\r\n  const getPriceValue = (item) => {\r\n    if (!item) return 0;\r\n    const v = item.price;\r\n    if (typeof v === 'number') return v;\r\n    if (!v) return 0;\r\n    const parsed = parseFloat(String(v).replace(/[^0-9.]/g, ''));\r\n    return Number.isFinite(parsed) ? parsed : 0;\r\n  };\r\n\r\n  const toggleBookingsSort = () => {\r\n    const next = !sortAsc;\r\n    const sorted = [...bookings].sort((a, b) => {\r\n      const pa = getPriceValue(a);\r\n      const pb = getPriceValue(b);\r\n      return next ? pa - pb : pb - pa;\r\n    });\r\n    setSortAsc(next);\r\n    setBookings(sorted);\r\n  };\r\n\r\n  if (loading) return <div className=\"container\"><p>Loading...</p></div>;\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\">\r\n        <div className=\"brand\"><h2 className=\"brand-heading\">Near-me Adventures</h2></div>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <button style={{ marginRight: 8 }} onClick={() => navigate('/dashboard')}>Back</button>\r\n        </div>\r\n      </div>\r\n\r\n      <h1>Payments</h1>\r\n      <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: 8 }}>\r\n        <button onClick={toggleBookingsSort} style={{ padding: '6px 10px' }}>{sortAsc ? 'Price ' : 'Price '}</button>\r\n      </div>\r\n      {bookings.length === 0 ? (\r\n        <div className=\"container\"><p>No booked experiences to pay for.</p></div>\r\n      ) : (\r\n        <div className=\"grid\" style={{ marginTop: 12 }}>\r\n          {bookings.map(b => (\r\n            <div key={b.id} className=\"card-item\">\r\n              <div className=\"card-media\" style={{ backgroundImage: `url(${b.img})` }} />\r\n              <div className=\"card-body\">\r\n                <div style={{ fontWeight: 700 }}>{b.title}</div>\r\n                <div className=\"muted\">{b.duration}</div>\r\n                <div style={{ marginTop: 12, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <div className=\"muted\">{b.priceLabel ? b.priceLabel : ` ${b.price}`}</div>\r\n                  <div>\r\n                    {b.paid ? (\r\n                      <>\r\n                        <span style={{ color: 'green', marginRight: 8 }}>Paid</span>\r\n                        <button onClick={() => handleMarkDone(b.id)}>Mark as done</button>\r\n                      </>\r\n                    ) : (\r\n                      <button onClick={() => handlePay(b.id)}>Make Payment</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction countWords(s) {\r\n  if (!s) return 0;\r\n  return s.trim().split(/\\s+/).filter(Boolean).length;\r\n}\r\n\r\nexport default function Recommendation() {\r\n  const navigate = useNavigate();\r\n  const [activities, setActivities] = useState('');\r\n  const [budget, setBudget] = useState('medium');\r\n  const [environment, setEnvironment] = useState('nature');\r\n  const [pace, setPace] = useState('moderate');\r\n  const [foodInterest, setFoodInterest] = useState('spicy');\r\n  const [crowd, setCrowd] = useState('moderate');\r\n  const [result, setResult] = useState(null);\r\n\r\n  function classify(inputs) {\r\n    const { activities, budget, environment, pace, foodInterest, crowd } = inputs;\r\n    const a = activities.toLowerCase();\r\n    const act = a.split(/[,;|\\/]+/).map(x => x.trim()).filter(Boolean);\r\n\r\n    const scores = {\r\n      'Adventurous Traveler': 0,\r\n      'Scenic Lover': 0,\r\n      'Foodie Traveler': 0,\r\n      'Heritage & Culture Lover': 0,\r\n      'Quiet & Relaxation Seeker': 0,\r\n      'Budget Traveler': 0,\r\n      'Luxury Traveler': 0,\r\n    };\r\n\r\n    const contains = (arr, keywords) => arr.some(it => keywords.some(k => it.includes(k)));\r\n\r\n    const advK = ['hike','trek','climb','raft','surf','dive','ski','bungee','zip','camp','adventure','trail','explore'];\r\n    const scenicK = ['scenic','view','waterfall','lake','mountain','beach','sunset','sunrise','landscape','valley','river'];\r\n    const foodK = ['food','dine','restaurant','cuisine','street','tasting','foodie','eat'];\r\n    const heritageK = ['museum','history','historic','temple','culture','heritage','monument','ruins','church','palace'];\r\n    const relaxK = ['spa','relax','yoga','retreat','calm','quiet','massage','resort'];\r\n\r\n    if (contains(act, advK) || pace === 'fast') scores['Adventurous Traveler'] += 3;\r\n    if (contains(act, scenicK) || ['beach','mountain','nature'].includes(environment)) scores['Scenic Lover'] += 3;\r\n    if (contains(act, foodK)) scores['Foodie Traveler'] += 3;\r\n    if (contains(act, heritageK) || ['city','historic','urban'].includes(environment)) scores['Heritage & Culture Lover'] += 3;\r\n    if (contains(act, relaxK) || pace === 'relaxed' || crowd === 'avoid') scores['Quiet & Relaxation Seeker'] += 3;\r\n\r\n    if (budget === 'low') scores['Budget Traveler'] += 4;\r\n    if (budget === 'high') scores['Luxury Traveler'] += 4;\r\n\r\n    // food preference signals (spicy / sweet / refreshing)\r\n    if (foodInterest === 'spicy') {\r\n      scores['Foodie Traveler'] += 3;\r\n      scores['Adventurous Traveler'] += 1;\r\n    }\r\n    if (foodInterest === 'sweet') {\r\n      scores['Foodie Traveler'] += 2;\r\n      scores['Scenic Lover'] += 1;\r\n    }\r\n    if (foodInterest === 'refreshing') {\r\n      scores['Quiet & Relaxation Seeker'] += 2;\r\n      scores['Scenic Lover'] += 1;\r\n    }\r\n\r\n    if (crowd === 'love') scores['Foodie Traveler'] += 1;\r\n    if (pace === 'moderate') scores['Scenic Lover'] += 1;\r\n    if (environment === 'beach') { scores['Scenic Lover'] += 1; scores['Quiet & Relaxation Seeker'] += 1; }\r\n\r\n    // ensure distinct primary and secondary\r\n    const sorted = Object.entries(scores).sort((a,b) => b[1] - a[1]);\r\n    let primary = sorted[0][0];\r\n    let secondary = sorted.find(([k]) => k !== primary)[0];\r\n\r\n    // if scores tie or secondary feels incompatible, pick next best\r\n    if (!secondary) secondary = Object.keys(scores).find(k => k !== primary) || primary;\r\n\r\n    // Build a short motivational explanation under 80 words\r\n    const templates = {\r\n      'Adventurous Traveler': `You're an Adventurous Traveler who seeks thrills and new challenges. Pairing adventure with`,\r\n      'Scenic Lover': `You're a Scenic Lover who treasures beautiful views and calm moments. Pairing scenery with`,\r\n      'Foodie Traveler': `You're a Foodie Traveler who delights in local flavors and culinary discoveries. Pairing food with`,\r\n      'Heritage & Culture Lover': `You're a Heritage & Culture Lover who enjoys history and local traditions. Pairing culture with`,\r\n      'Quiet & Relaxation Seeker': `You're a Quiet & Relaxation Seeker who values peace and recharge time. Pairing relaxation with`,\r\n      'Budget Traveler': `You're a Budget Traveler who loves smart, wallet-friendly adventures. Pairing budget-savvy choices with`,\r\n      'Luxury Traveler': `You're a Luxury Traveler who prefers comfort and premium experiences. Pairing luxury with`,\r\n    };\r\n\r\n    let explanation = `${templates[primary]} ${secondary.toLowerCase()}. Go plan an adventure that fits your style  you deserve it!`;\r\n\r\n    // enforce < 80 words\r\n    if (countWords(explanation) > 80) {\r\n      const words = explanation.split(/\\s+/).slice(0,80).join(' ');\r\n      explanation = words + '...';\r\n    }\r\n\r\n    return { primary, secondary, explanation };\r\n  }\r\n\r\n  function onSubmit(e) {\r\n    e.preventDefault();\r\n    const res = classify({ activities, budget, environment, pace, foodInterest, crowd });\r\n    setResult(res);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <div className=\"page-header\"><h2>Recommendation For you!!</h2></div>\r\n      <p>Fill in your travel preferences below to get a personalized adventure recommendation.</p>\r\n      <div style={{ marginTop: 8, marginBottom: 12, display: 'flex', justifyContent: 'flex-end' }}>\r\n        <div style={{ display: 'flex', gap: 8 }}>\r\n          <button\r\n            onClick={() => navigate('/home')}\r\n            style={{ padding: '6px 10px', fontSize: 20, lineHeight: 1, borderRadius: 4 }}\r\n          >\r\n            Back\r\n          </button>\r\n          <button\r\n            onClick={() => navigate('/browse')}\r\n            style={{ padding: '6px 10px', fontSize: 20, lineHeight: 1, borderRadius: 4 }}\r\n          >\r\n            Browse\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <form className=\"form\" onSubmit={onSubmit} style={{ maxWidth: 720 }}>\r\n        <label>Preferred activities (comma separated)</label>\r\n        <input\r\n          value={activities}\r\n          onChange={e => setActivities(e.target.value)}\r\n          placeholder=\"e.g. hiking, food tasting, museum\"\r\n          style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}\r\n        />\r\n\r\n        <label>Budget level</label>\r\n        <select value={budget} onChange={e => setBudget(e.target.value)} style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}>\r\n          <option value=\"low\">Low</option>\r\n          <option value=\"medium\">Medium</option>\r\n          <option value=\"high\">High</option>\r\n        </select>\r\n\r\n        <label>Preferred environment</label>\r\n        <select value={environment} onChange={e => setEnvironment(e.target.value)} style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}>\r\n          <option value=\"nature\">Nature</option>\r\n          <option value=\"mountain\">Mountain</option>\r\n          <option value=\"beach\">Beach</option>\r\n          <option value=\"city\">City</option>\r\n          <option value=\"rural\">Rural</option>\r\n        </select>\r\n\r\n        <label>Travel pace</label>\r\n        <select value={pace} onChange={e => setPace(e.target.value)} style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}>\r\n          <option value=\"relaxed\">Relaxed</option>\r\n          <option value=\"moderate\">Moderate</option>\r\n          <option value=\"fast\">Fast</option>\r\n        </select>\r\n\r\n        <label>Food interest level</label>\r\n        <select value={foodInterest} onChange={e => setFoodInterest(e.target.value)} style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}>\r\n          <option value=\"spicy\">Spicy</option>\r\n          <option value=\"sweet\">Sweet</option>\r\n          <option value=\"refreshing\">Refreshing</option>\r\n        </select>\r\n\r\n        <label>Crowd preference</label>\r\n        <select value={crowd} onChange={e => setCrowd(e.target.value)} style={{ width: '100%', padding: 10, fontSize: 16, marginBottom: 12 }}>\r\n          <option value=\"avoid\">Avoid crowds</option>\r\n          <option value=\"calm\">Calm / small groups</option>\r\n          <option value=\"moderate\">Moderate</option>\r\n          <option value=\"love\">Love crowds</option>\r\n        </select>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <button type=\"submit\">Get Recommendation</button>\r\n        </div>\r\n      </form>\r\n\r\n      {result && (\r\n        <div style={{ marginTop: 20 }} className=\"card\">\r\n          <h3>Primary Type: {result.primary}</h3>\r\n          <h3>Secondary Type: {result.secondary}</h3>\r\n          <p>{result.explanation}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAllReviews } from '../services/api';\r\nimport '../styles/reviews.css';\r\n\r\nexport default function ReviewsFeed() {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchReviews = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      console.log(' Fetching all reviews...');\r\n      const data = await getAllReviews();\r\n      console.log(' Reviews data received:', data);\r\n      setReviews(data.reviews || []);\r\n    } catch (err) {\r\n      console.error(' Error fetching reviews:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchReviews();\r\n  }, [fetchReviews]);\r\n\r\n  // Listen for external refresh events (dispatched after creating a review)\r\n  useEffect(() => {\r\n    const handler = () => {\r\n      fetchReviews();\r\n    };\r\n    window.addEventListener('reviews:updated', handler);\r\n    return () => window.removeEventListener('reviews:updated', handler);\r\n  }, [fetchReviews]);\r\n\r\n  const renderStars = (rating) => {\r\n    if (!rating) return null;\r\n    return (\r\n      <div className=\"stars\">\r\n        {[...Array(5)].map((_, i) => (\r\n          <span key={i} className={`star ${i < rating ? 'filled' : ''}`}>\r\n            \r\n          </span>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    const d = new Date(date);\r\n    return d.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });\r\n  };\r\n\r\n  return (\r\n    <div className=\"reviews-container\">\r\n      <div className=\"reviews-header\">\r\n        <div className=\"reviews-title-section\">\r\n          <h1 className=\"reviews-title\">Community Reviews & Feedback</h1>\r\n          <p className=\"reviews-subtitle\">See what other travelers think about their adventures</p>\r\n        </div>\r\n        <div className=\"reviews-actions\">\r\n          <button className=\"btn-secondary\" onClick={() => navigate('/home')}> Back</button>\r\n          <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading && (\r\n        <div className=\"loading-container\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Loading reviews...</p>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-container\">\r\n          <p className=\"error-message\">Error: {error}</p>\r\n          <button onClick={fetchReviews} className=\"btn-retry\">Retry</button>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && reviews.length === 0 && (\r\n        <div className=\"empty-state\">\r\n          <div className=\"empty-icon\"></div>\r\n          <h2>No reviews yet</h2>\r\n          <p>Be the first to share your travel experience!</p>\r\n          <button className=\"btn-primary\" onClick={() => navigate('/give-review')}>\r\n            Write a Review\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && !error && reviews.length > 0 && (\r\n        <div className=\"reviews-grid\">\r\n          {reviews.map((review) => (\r\n            <div key={review._id} className=\"review-card\">\r\n              <div className=\"review-header\">\r\n                <div className=\"reviewer-info no-avatar\">\r\n                  <div className=\"reviewer-details\">\r\n                    <h3 className=\"reviewer-name\">{review.userId?.name || 'Anonymous User'}</h3>\r\n                    {review.location && (\r\n                      <p className=\"reviewer-location\">{review.location}</p>\r\n                    )}\r\n                    <p className=\"review-date\">{formatDate(review.createdAt)}</p>\r\n                  </div>\r\n                </div>\r\n                {review.destination && (\r\n                  <span className=\"destination-badge\">{review.destination}</span>\r\n                )}\r\n              </div>\r\n\r\n              {review.rating && (\r\n                <div className=\"review-rating\">\r\n                  {renderStars(review.rating)}\r\n                  <span className=\"rating-number\">{review.rating}/5</span>\r\n                </div>\r\n              )}\r\n\r\n              {review.reviewText && (\r\n                <p className=\"review-text\">{review.reviewText}</p>\r\n              )}\r\n\r\n              {!review.reviewText && review.rating && (\r\n                <p className=\"review-text\" style={{ fontStyle: 'italic', color: '#888' }}>\r\n                   {review.rating}-star rating\r\n                </p>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Floating corner button to give a review */}\r\n      <button className=\"fab-give-review\" title=\"Write a review\" onClick={() => navigate('/give-review')}></button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createReview, getProfile } from '../services/api';\r\nimport '../styles/reviews.css';\r\n\r\nexport default function GiveReview() {\r\n  const [form, setForm] = useState({\r\n    rating: 0,\r\n    reviewText: '',\r\n    location: '',\r\n  });\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    loadUserProfile();\r\n  }, []);\r\n\r\n  const loadUserProfile = async () => {\r\n    try {\r\n      const data = await getProfile();\r\n      setUser(data.user);\r\n    } catch (err) {\r\n      setError('Failed to load profile: ' + err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRatingChange = (rating) => {\r\n    setForm({ ...form, rating });\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    // Location is required\r\n    if (!form.location || !form.location.trim()) {\r\n      setError('Location is required');\r\n      return;\r\n    }\r\n\r\n    // Validation: if reviewText is provided, rating must be provided\r\n    if (form.reviewText.trim() && !form.rating) {\r\n      setError('Rating is required when you write a review');\r\n      return;\r\n    }\r\n\r\n    // At least rating or review text must be provided\r\n    if (!form.rating && !form.reviewText.trim()) {\r\n      setError('Please provide either a rating or a review');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      console.log('Submitting review payload', {\r\n        rating: form.rating || null,\r\n        reviewText: form.reviewText.trim() || null,\r\n        location: form.location.trim(),\r\n      });\r\n      await createReview({\r\n        rating: form.rating || null,\r\n        reviewText: form.reviewText.trim() || null,\r\n        location: form.location.trim(),\r\n      });\r\n      // notify reviews page to refresh and navigate back to reviews\r\n      try {\r\n        window.dispatchEvent(new Event('reviews:updated'));\r\n      } catch (e) {\r\n        // ignore if window not available in some environments\r\n      }\r\n      navigate('/reviews');\r\n    } catch (err) {\r\n      console.error('Failed to submit review', err);\r\n      // Provide a clearer error message when possible, including status/body\r\n      if (err && err.status) {\r\n        setError(`Failed to submit review (${err.status}): ${err.body?.message || JSON.stringify(err.body)}`);\r\n      } else {\r\n        setError(err.message || 'Failed to submit review.');\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"give-review-container\">\r\n        <div className=\"loading-container\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Loading your profile...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"give-review-container\">\r\n      <button className=\"btn-back\" onClick={() => navigate('/reviews')}>\r\n         Back to Reviews\r\n      </button>\r\n\r\n      <div className=\"give-review-card\">\r\n        {/* User Profile Section */}\r\n        {user && (\r\n          <div className=\"user-profile-section\">\r\n            {user.profilePicture ? (\r\n              <img\r\n                src={user.profilePicture}\r\n                alt={user.name}\r\n                className=\"user-profile-avatar\"\r\n                onError={(e) => {\r\n                  e.target.style.display = 'none';\r\n                }}\r\n              />\r\n            ) : null}\r\n            <div className=\"user-profile-info\">\r\n              <h2 className=\"user-profile-name\">{user.name}</h2>\r\n              <p className=\"user-profile-email\">{user.email}</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"form-divider\"></div>\r\n\r\n        {/* Review Form */}\r\n        <form onSubmit={handleSubmit} className=\"review-form\">\r\n          <h1 className=\"form-title\">Share Your Travel Experience</h1>\r\n\r\n          {error && (\r\n            <div className=\"alert alert-error\">\r\n              <span className=\"alert-icon\"></span>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {success && (\r\n            <div className=\"alert alert-success\">\r\n              <span className=\"alert-icon\"></span>\r\n              Review submitted successfully! Redirecting...\r\n            </div>\r\n          )}\r\n\r\n          {/* Location Field */}\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"location\" className=\"form-label\">\r\n              Location\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"location\"\r\n              name=\"location\"\r\n              placeholder=\"e.g., Ahsan Manzil, Lalbagh Fort or any location you visited\"\r\n              value={form.location}\r\n              onChange={handleInputChange}\r\n              className=\"form-input\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Rating Section */}\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">\r\n              Rating\r\n              {form.reviewText.trim() && <span className=\"required-badge\">*Required</span>}\r\n            </label>\r\n            <div className=\"rating-selector\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <button\r\n                  key={star}\r\n                  type=\"button\"\r\n                  className={`rating-star ${form.rating >= star ? 'active' : ''}`}\r\n                  onClick={() => handleRatingChange(star)}\r\n                  title={`${star} Star${star !== 1 ? 's' : ''}`}\r\n                >\r\n                  \r\n                </button>\r\n              ))}\r\n              {form.rating > 0 && (\r\n                <span className=\"rating-display\">{form.rating}/5 - {getRatingLabel(form.rating)}</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Review Text Field */}\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"reviewText\" className=\"form-label\">\r\n              Your Review (Optional)\r\n              {!form.reviewText && form.rating && (\r\n                <span className=\"optional-note\">(Rating only is fine!)</span>\r\n              )}\r\n            </label>\r\n            <textarea\r\n              id=\"reviewText\"\r\n              name=\"reviewText\"\r\n              placeholder=\"Share your thoughts about thislocation or place... (at least 10 characters if provided)\"\r\n              value={form.reviewText}\r\n              onChange={handleInputChange}\r\n              className=\"form-textarea\"\r\n              rows=\"6\"\r\n            />\r\n            {form.reviewText && (\r\n              <div className=\"char-count\">\r\n                {form.reviewText.length} characters\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={submitting}\r\n            className=\"btn-submit\"\r\n          >\r\n            {submitting ? 'Submitting...' : 'Submit Review'}\r\n          </button>\r\n\r\n          <p className=\"form-hint\">\r\n             Tip: Your review helps other travelers make informed decisions. Be honest and constructive!\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getRatingLabel(rating) {\r\n  const labels = {\r\n    1: 'Poor',\r\n    2: 'Fair',\r\n    3: 'Good',\r\n    4: 'Very Good',\r\n    5: 'Excellent',\r\n  };\r\n  return labels[rating] || '';\r\n}\r\n","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getAllReviews, deleteReview } from '../services/api';\r\n\r\nexport default function ReviewManage() {\r\n  const navigate = useNavigate();\r\n  const [reviews, setReviews] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [search, setSearch] = useState('');\r\n  const [deletingId, setDeletingId] = useState(null);\r\n\r\n  const fetch = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await getAllReviews();\r\n      setReviews(data.reviews || []);\r\n    } catch (err) {\r\n      setError(err.message || 'Failed to load reviews');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => { fetch(); }, [fetch]);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Delete this review?')) return;\r\n    try {\r\n      setDeletingId(id);\r\n      await deleteReview(id);\r\n      setReviews(prev => prev.filter(r => r._id !== id));\r\n    } catch (err) {\r\n      alert(err.message || 'Delete failed');\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const filtered = reviews.filter(r => {\r\n    if (!search) return true;\r\n    const q = search.toLowerCase();\r\n    return (r.userId?.name || '').toLowerCase().includes(q) || (r.userId?.email || '').toLowerCase().includes(q);\r\n  });\r\n\r\n  return (\r\n    <div className=\"container\" style={{ padding: 20, background: '#000', color: '#fff', minHeight: '60vh' }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n        <h2>Review Management</h2>\r\n        <div>\r\n          <button onClick={() => navigate('/admin')} style={{ marginRight: 8 }}>Back</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <input\r\n          placeholder=\"Search by reviewer name or email\"\r\n          value={search}\r\n          onChange={e => setSearch(e.target.value)}\r\n          style={{\r\n            padding: 8,\r\n            width: '100%',\r\n            maxWidth: 420,\r\n            borderRadius: 6,\r\n            background: '#0f0f0f',\r\n            color: '#fff',\r\n            border: '1px solid #333'\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {loading && <p>Loading reviews...</p>}\r\n      {error && <p style={{ color: 'crimson' }}>{error}</p>}\r\n\r\n      {!loading && !error && (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 8, marginTop: 12 }}>\r\n            {filtered.map(r => (\r\n            <div key={r._id} style={{ display: 'flex', alignItems: 'center', gap: 12, padding: 12, border: '1px solid #222', borderRadius: 8, background: '#0b0b0b', color: '#eee' }}>\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 700, color: '#fff' }}>{r.userId?.name || 'Anonymous'}</div>\r\n                <div style={{ fontSize: 12, color: '#bbb' }}>{r.userId?.email}</div>\r\n                <div style={{ marginTop: 6, color: '#e6e6e6' }}>{r.reviewText ? r.reviewText.slice(0, 240) : `Rating: ${r.rating || 'N/A'}`}</div>\r\n                <div style={{ marginTop: 6, fontSize: 12, color: '#999' }}>Location: {r.location || ''}  {new Date(r.createdAt).toLocaleString()}</div>\r\n              </div>\r\n              <div style={{ display: 'flex', gap: 8 }}>\r\n                <button onClick={() => handleDelete(r._id)} disabled={deletingId === r._id} style={{ background: '#c0392b', color: 'white', border: 'none', padding: '6px 10px', borderRadius: 6 }}>\r\n                  {deletingId === r._id ? 'Deleting...' : 'Delete'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      <div style={{ marginTop: 12 }}>\r\n        <button className=\"btn-logout\" onClick={() => { localStorage.removeItem('token'); navigate('/login'); }}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from 'react';\nimport {\n  getPendingRequests,\n  acceptConnectionRequest,\n  rejectConnectionRequest\n} from '../services/api';\n\nexport default function PendingRequests() {\n  const [requests, setRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    loadPendingRequests();\n  }, []);\n\n  const loadPendingRequests = async () => {\n    try {\n      setLoading(true);\n      const data = await getPendingRequests();\n      setRequests(data.pendingRequests || []);\n      setError('');\n    } catch (err) {\n      setError(err.message || 'Failed to load pending requests');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAccept = async (connectionId) => {\n    try {\n      await acceptConnectionRequest(connectionId);\n      setRequests(requests.filter(r => r._id !== connectionId));\n    } catch (err) {\n      alert(err.message || 'Failed to accept request');\n    }\n  };\n\n  const handleReject = async (connectionId) => {\n    try {\n      await rejectConnectionRequest(connectionId);\n      setRequests(requests.filter(r => r._id !== connectionId));\n    } catch (err) {\n      alert(err.message || 'Failed to reject request');\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading...</div>;\n  if (error) return <div className=\"error\">{error}</div>;\n\n  return (\n    <div className=\"pending-requests\">\n      <h2>Pending Connection Requests ({requests.length})</h2>\n      {requests.length === 0 ? (\n        <p>No pending requests</p>\n      ) : (\n        <div className=\"requests-list\">\n          {requests.map(request => (\n            <div key={request._id} className=\"request-card\">\n              <div className=\"user-info\">\n                <h3>{request.requester.name}</h3>\n                <p>{request.requester.email}</p>\n                <small>Sent: {new Date(request.createdAt).toLocaleDateString()}</small>\n              </div>\n              <div className=\"actions\">\n                <button\n                  className=\"btn-accept\"\n                  onClick={() => handleAccept(request._id)}\n                >\n                  Accept\n                </button>\n                <button\n                  className=\"btn-reject\"\n                  onClick={() => handleReject(request._id)}\n                >\n                  Reject\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getFriends, removeFriend } from '../services/api';\n\nexport default function FriendsList() {\n  const navigate = useNavigate();\n  const [friends, setFriends] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    loadFriends();\n  }, []);\n\n  const loadFriends = async () => {\n    try {\n      setLoading(true);\n      const data = await getFriends();\n      setFriends(data.friends || []);\n      setError('');\n    } catch (err) {\n      setError(err.message || 'Failed to load friends');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveFriend = async (friendId) => {\n    if (!window.confirm('Are you sure you want to remove this friend?')) return;\n    \n    try {\n      await removeFriend(friendId);\n      setFriends(friends.filter(f => f._id !== friendId));\n    } catch (err) {\n      alert(err.message || 'Failed to remove friend');\n    }\n  };\n\n  const handleMessage = (friendId) => {\n    navigate(`/direct-chat/${friendId}`);\n  };\n\n  if (loading) return <div className=\"loading\">Loading...</div>;\n  if (error) return <div className=\"error\">{error}</div>;\n\n  return (\n    <div className=\"friends-list\">\n      <h2>My Friends ({friends.length})</h2>\n      {friends.length === 0 ? (\n        <p>No friends yet. Start connecting!</p>\n      ) : (\n        <div className=\"friends-grid\">\n          {friends.map(friend => (\n            <div key={friend._id} className=\"friend-card\">\n              <div className=\"friend-info\">\n                <h3>{friend.name}</h3>\n                <p>{friend.email}</p>\n              </div>\n              <div className=\"friend-actions\">\n                <button\n                  className=\"btn-message\"\n                  onClick={() => handleMessage(friend._id)}\n                >\n                  Message\n                </button>\n                <button\n                  className=\"btn-remove\"\n                  onClick={() => handleRemoveFriend(friend._id)}\n                >\n                  Unfriend\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport PendingRequests from '../components/PendingRequests';\nimport FriendsList from '../components/FriendsList';\nimport { getSentRequests, cancelConnectionRequest } from '../services/api';\n\nexport default function Connections() {\n  const [activeTab, setActiveTab] = useState('friends');\n  const [sentRequests, setSentRequests] = useState([]);\n  const [loadingSent, setLoadingSent] = useState(false);\n\n  const loadSentRequests = async () => {\n    try {\n      setLoadingSent(true);\n      const data = await getSentRequests();\n      setSentRequests(data.sentRequests || []);\n    } catch (err) {\n      console.error('Failed to load sent requests:', err);\n    } finally {\n      setLoadingSent(false);\n    }\n  };\n\n  const handleCancelRequest = async (connectionId) => {\n    try {\n      await cancelConnectionRequest(connectionId);\n      setSentRequests(sentRequests.filter(r => r._id !== connectionId));\n    } catch (err) {\n      alert(err.message || 'Failed to cancel request');\n    }\n  };\n\n  const handleTabChange = (tab) => {\n    setActiveTab(tab);\n    if (tab === 'sent') {\n      loadSentRequests();\n    }\n  };\n\n  return (\n    <div className=\"connections-page\">\n      <div className=\"connections-header\">\n        <h1>Connections</h1>\n        <div className=\"tabs\">\n          <button\n            className={activeTab === 'friends' ? 'tab active' : 'tab'}\n            onClick={() => handleTabChange('friends')}\n          >\n            Friends\n          </button>\n          <button\n            className={activeTab === 'pending' ? 'tab active' : 'tab'}\n            onClick={() => handleTabChange('pending')}\n          >\n            Pending Requests\n          </button>\n          <button\n            className={activeTab === 'sent' ? 'tab active' : 'tab'}\n            onClick={() => handleTabChange('sent')}\n          >\n            Sent Requests\n          </button>\n        </div>\n      </div>\n\n      <div className=\"connections-content\">\n        {activeTab === 'friends' && <FriendsList />}\n        \n        {activeTab === 'pending' && <PendingRequests />}\n        \n        {activeTab === 'sent' && (\n          <div className=\"sent-requests\">\n            <h2>Sent Requests ({sentRequests.length})</h2>\n            {loadingSent ? (\n              <div className=\"loading\">Loading...</div>\n            ) : sentRequests.length === 0 ? (\n              <p>No sent requests</p>\n            ) : (\n              <div className=\"requests-list\">\n                {sentRequests.map(request => (\n                  <div key={request._id} className=\"request-card\">\n                    <div className=\"user-info\">\n                      <h3>{request.recipient.name}</h3>\n                      <p>{request.recipient.email}</p>\n                      <small>Sent: {new Date(request.createdAt).toLocaleDateString()}</small>\n                    </div>\n                    <div className=\"actions\">\n                      <button\n                        className=\"btn-cancel\"\n                        onClick={() => handleCancelRequest(request._id)}\n                      >\n                        Cancel Request\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport {\n  getConnectionStatus,\n  sendConnectionRequest,\n  cancelConnectionRequest,\n  acceptConnectionRequest,\n  rejectConnectionRequest\n} from '../services/api';\n\nexport default function ConnectionButton({ otherUserId, otherUserName }) {\n  const [status, setStatus] = useState(null);\n  const [connectionId, setConnectionId] = useState(null);\n  const [isRequester, setIsRequester] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadConnectionStatus();\n  }, [otherUserId]);\n\n  const loadConnectionStatus = async () => {\n    try {\n      setLoading(true);\n      const data = await getConnectionStatus(otherUserId);\n      setStatus(data.status);\n      setConnectionId(data.connectionId);\n      setIsRequester(data.isRequester);\n    } catch (err) {\n      console.error('Failed to load connection status:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSendRequest = async () => {\n    try {\n      const result = await sendConnectionRequest(otherUserId);\n      setStatus('pending');\n      setConnectionId(result.connection._id);\n      setIsRequester(true);\n    } catch (err) {\n      alert(err.message || 'Failed to send request');\n    }\n  };\n\n  const handleCancelRequest = async () => {\n    try {\n      await cancelConnectionRequest(connectionId);\n      setStatus('none');\n      setConnectionId(null);\n      setIsRequester(false);\n    } catch (err) {\n      alert(err.message || 'Failed to cancel request');\n    }\n  };\n\n  const handleAccept = async () => {\n    try {\n      await acceptConnectionRequest(connectionId);\n      setStatus('accepted');\n    } catch (err) {\n      alert(err.message || 'Failed to accept request');\n    }\n  };\n\n  const handleReject = async () => {\n    try {\n      await rejectConnectionRequest(connectionId);\n      setStatus('rejected');\n    } catch (err) {\n      alert(err.message || 'Failed to reject request');\n    }\n  };\n\n  if (loading) return <div className=\"loading-btn\">...</div>;\n\n  if (status === 'none') {\n    return (\n      <button className=\"btn-connect\" onClick={handleSendRequest}>\n        Add Friend\n      </button>\n    );\n  }\n\n  if (status === 'pending' && isRequester) {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-text\">Request Sent</span>\n        <button className=\"btn-cancel\" onClick={handleCancelRequest}>\n          Cancel\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'pending' && !isRequester) {\n    return (\n      <div className=\"connection-actions\">\n        <button className=\"btn-accept\" onClick={handleAccept}>\n          Accept\n        </button>\n        <button className=\"btn-reject\" onClick={handleReject}>\n          Reject\n        </button>\n      </div>\n    );\n  }\n\n  if (status === 'accepted') {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-friends\"> Friends</span>\n      </div>\n    );\n  }\n\n  if (status === 'rejected') {\n    return (\n      <div className=\"connection-status\">\n        <span className=\"status-rejected\">Request Rejected</span>\n      </div>\n    );\n  }\n\n  return null;\n}\n","import React, { useState, useEffect } from 'react';\nimport { browseUsers } from '../services/api';\nimport ConnectionButton from '../components/ConnectionButton';\nimport '../styles/userDirectory.css';\n\nexport default function FindPeople() {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [search, setSearch] = useState('');\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const loadUsers = async () => {\n    try {\n      setLoading(true);\n      const data = await browseUsers();\n      setUsers(data.users || []);\n      setError('');\n    } catch (err) {\n      setError(err.message || 'Failed to load users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredUsers = users.filter(user =>\n    user.name.toLowerCase().includes(search.toLowerCase()) ||\n    user.email.toLowerCase().includes(search.toLowerCase())\n  );\n\n  if (loading) return <div className=\"loading-container\">Loading users...</div>;\n  if (error) return <div className=\"error-container\">{error}</div>;\n\n  return (\n    <div className=\"find-people-page\">\n      <div className=\"find-people-header\">\n        <h1>Find People</h1>\n        <p className=\"subtitle\">Connect with other travelers and adventurers</p>\n      </div>\n\n      <div className=\"search-section\">\n        <input\n          type=\"text\"\n          placeholder=\"Search by name or email...\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          className=\"search-input\"\n        />\n        <span className=\"search-count\">{filteredUsers.length} users found</span>\n      </div>\n\n      <div className=\"users-grid\">\n        {filteredUsers.length === 0 ? (\n          <div className=\"no-users\">\n            <p>No users found matching your search.</p>\n          </div>\n        ) : (\n          filteredUsers.map(user => (\n            <div key={user._id} className=\"user-card\">\n              <div className=\"user-avatar\">\n                {user.name.charAt(0).toUpperCase()}\n              </div>\n              <div className=\"user-details\">\n                <h3 className=\"user-name\">{user.name}</h3>\n                <p className=\"user-email\">{user.email}</p>\n                {user.createdAt && (\n                  <p className=\"user-joined\">\n                    Joined {new Date(user.createdAt).toLocaleDateString()}\n                  </p>\n                )}\n              </div>\n              <div className=\"user-actions\">\n                <ConnectionButton \n                  otherUserId={user._id} \n                  otherUserName={user.name} \n                />\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getConversations, getFriends } from '../services/api';\nimport '../styles/directChat.css';\n\nexport default function Messages() {\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [friends, setFriends] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('conversations');\n\n  useEffect(() => {\n    loadData();\n    const interval = setInterval(loadData, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const loadData = async () => {\n    try {\n      const [convData, friendsData] = await Promise.all([\n        getConversations(),\n        getFriends()\n      ]);\n      \n      setConversations(convData.conversations || []);\n      setFriends(friendsData.friends || []);\n      setError('');\n    } catch (err) {\n      setError(err.message || 'Failed to load data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const startChat = (userId) => {\n    navigate(`/direct-chat/${userId}`);\n  };\n\n  if (loading) return <div className=\"loading-container\">Loading...</div>;\n\n  return (\n    <div className=\"messages-page\">\n      <div className=\"messages-header\">\n        <h1>Messages</h1>\n        <div className=\"tabs\">\n          <button\n            className={activeTab === 'conversations' ? 'tab active' : 'tab'}\n            onClick={() => setActiveTab('conversations')}\n          >\n            Conversations\n          </button>\n          <button\n            className={activeTab === 'friends' ? 'tab active' : 'tab'}\n            onClick={() => setActiveTab('friends')}\n          >\n            All Friends\n          </button>\n        </div>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      {activeTab === 'conversations' && (\n        <div className=\"conversations-list\">\n          {conversations.length === 0 ? (\n            <div className=\"no-conversations\">\n              <p>No conversations yet</p>\n              <p className=\"hint\">Start chatting with your friends!</p>\n            </div>\n          ) : (\n            conversations.map((conv) => (\n              <div\n                key={conv.user._id}\n                className=\"conversation-item\"\n                onClick={() => startChat(conv.user._id)}\n              >\n                <div className=\"conv-avatar\">\n                  {conv.user.name.charAt(0).toUpperCase()}\n                </div>\n                <div className=\"conv-details\">\n                  <div className=\"conv-header\">\n                    <h3>{conv.user.name}</h3>\n                    <span className=\"conv-time\">\n                      {new Date(conv.lastMessageTime).toLocaleDateString()}\n                    </span>\n                  </div>\n                  <p className=\"conv-last-message\">{conv.lastMessage}</p>\n                </div>\n                {conv.unreadCount > 0 && (\n                  <span className=\"unread-badge\">{conv.unreadCount}</span>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      )}\n\n      {activeTab === 'friends' && (\n        <div className=\"friends-list\">\n          {friends.length === 0 ? (\n            <div className=\"no-friends\">\n              <p>No friends yet</p>\n              <p className=\"hint\">Add friends to start messaging!</p>\n            </div>\n          ) : (\n            friends.map((friend) => (\n              <div\n                key={friend._id}\n                className=\"friend-item\"\n                onClick={() => startChat(friend._id)}\n              >\n                <div className=\"friend-avatar\">\n                  {friend.name.charAt(0).toUpperCase()}\n                </div>\n                <div className=\"friend-details\">\n                  <h3>{friend.name}</h3>\n                  <p>{friend.email}</p>\n                </div>\n                <button className=\"chat-button\">\n                  Chat\n                </button>\n              </div>\n            ))\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { getConversation, sendDirectMessage, getProfile } from '../services/api';\nimport '../styles/directChat.css';\n\nexport default function DirectChat() {\n  const { userId } = useParams();\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState('');\n  const [otherUser, setOtherUser] = useState(null);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    loadCurrentUser();\n  }, []);\n\n  useEffect(() => {\n    if (userId && currentUserId) {\n      loadConversation();\n      const interval = setInterval(loadConversation, 3000);\n      return () => clearInterval(interval);\n    }\n  }, [userId, currentUserId]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const loadCurrentUser = async () => {\n    try {\n      const res = await getProfile();\n      setCurrentUserId(res.user._id);\n    } catch (err) {\n      console.error('Failed to load user profile:', err);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const loadConversation = async () => {\n    try {\n      const data = await getConversation(userId);\n      setMessages(data.messages || []);\n      \n      if (data.messages && data.messages.length > 0) {\n        const firstMsg = data.messages[0];\n        const other = firstMsg.sender._id === currentUserId ? firstMsg.recipient : firstMsg.sender;\n        setOtherUser(other);\n      }\n      \n      setError('');\n      setLoading(false);\n    } catch (err) {\n      setError(err.message || 'Failed to load messages');\n      setLoading(false);\n    }\n  };\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim()) return;\n\n    try {\n      setSending(true);\n      await sendDirectMessage(userId, newMessage.trim());\n      setNewMessage('');\n      await loadConversation();\n    } catch (err) {\n      alert(err.message || 'Failed to send message');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  if (loading || !currentUserId) return <div className=\"loading-container\">Loading conversation...</div>;\n  if (error) return <div className=\"error-container\">{error}</div>;\n\n  return (\n    <div className=\"direct-chat-page\">\n      <div className=\"chat-header\">\n        <button className=\"back-button\" onClick={() => navigate('/messages')}>\n           Back\n        </button>\n        <div className=\"chat-user-info\">\n          {otherUser && (\n            <>\n              <div className=\"chat-avatar\">\n                {otherUser.name?.charAt(0).toUpperCase()}\n              </div>\n              <div>\n                <h3>{otherUser.name}</h3>\n                <p className=\"user-status\">Active</p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      <div className=\"messages-container\">\n        {messages.length === 0 ? (\n          <div className=\"no-messages\">\n            <p>No messages yet. Start the conversation!</p>\n          </div>\n        ) : (\n          messages.map((msg) => (\n            <div\n              key={msg._id}\n              className={`message ${msg.sender._id === currentUserId ? 'sent' : 'received'}`}\n            >\n              <div className=\"message-content\">\n                <p className=\"message-text\">{msg.text}</p>\n                <span className=\"message-time\">\n                  {new Date(msg.createdAt).toLocaleTimeString([], { \n                    hour: '2-digit', \n                    minute: '2-digit' \n                  })}\n                </span>\n              </div>\n            </div>\n          ))\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      <form className=\"message-input-form\" onSubmit={handleSend}>\n        <textarea\n          value={newMessage}\n          onChange={(e) => setNewMessage(e.target.value)}\n          onKeyPress={(e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handleSend(e);\n            }\n          }}\n          placeholder=\"Aa\"\n          className=\"message-input\"\n          disabled={sending}\n          rows={1}\n        />\n        <button \n          type=\"submit\" \n          className=\"send-button\"\n          disabled={sending || !newMessage.trim()}\n          aria-label=\"Send\"\n        />\n      </form>\n    </div>\n  );\n}\n","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nexport default function RequireAuth({ children }) {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) return <Navigate to=\"/login\" replace />;\r\n  return children;\r\n}","import React from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useTheme } from '../contexts/ThemeContext';\nimport '../styles/navbar.css';\n\nexport default function Navbar({ user, onToggleSidebar, sidebarOpen }) {\n  const navigate = useNavigate();\n  const { theme, toggleTheme } = useTheme();\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-container\">\n        <div className=\"navbar-left\">\n          <button \n            className=\"sidebar-toggle\" \n            onClick={onToggleSidebar}\n            aria-label=\"Toggle sidebar\"\n          >\n            <span className={`hamburger ${sidebarOpen ? 'open' : ''}`}>\n              <span></span>\n              <span></span>\n              <span></span>\n            </span>\n          </button>\n          <Link to=\"/home\" className=\"navbar-brand\">\n            <span className=\"brand-icon\"></span>\n            <span className=\"brand-text\">Near-me Adventures</span>\n          </Link>\n        </div>\n        \n        <div className=\"navbar-right\">\n          <button className=\"theme-toggle\" onClick={toggleTheme}>\n            <span className=\"theme-toggle-icon\">{theme === 'dark' ? '' : ''}</span>\n            <span>{theme === 'dark' ? 'Light' : 'Dark'}</span>\n          </button>\n          {user && (\n            <>\n              <div className=\"user-info\">\n                <span className=\"user-name\">{user.name}</span>\n                <span className=\"user-email\">{user.email}</span>\n              </div>\n              <button className=\"btn-logout\" onClick={handleLogout}>\n                Logout\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n}\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport '../styles/sidebar.css';\n\nexport default function Sidebar({ isOpen, unreadChat, pendingConnections }) {\n  const navItems = [\n    { path: '/home', icon: '', label: 'Home' },\n    { path: '/browse', icon: '', label: 'Browse Experiences' },\n    { path: '/all-places', icon: '', label: 'All Places' },\n    { path: '/trending', icon: '', label: 'Trending' },\n    { path: '/recommendation', icon: '', label: 'Recommendations' },\n    { path: '/dashboard', icon: '', label: 'Dashboard' },\n    { path: '/find-people', icon: '', label: 'Find People' },\n    { path: '/connections', icon: '', label: 'Connections', badge: pendingConnections },\n    { path: '/messages', icon: '', label: 'Messages' },\n    { path: '/reviews', icon: '', label: 'Reviews' },\n    { path: '/chat', icon: '', label: 'Chat', badge: unreadChat },\n    { path: '/payment', icon: '', label: 'Payment' },\n  ];\n\n  const adminItems = [\n    { path: '/add-experiences', icon: '', label: 'Add Experience' },\n    { path: '/created-experiences', icon: '', label: 'My Experiences' },\n    { path: '/admin', icon: '', label: 'Admin Dashboard' },\n    { path: '/analysis', icon: '', label: 'Analytics' },\n  ];\n\n  return (\n    <>\n      <aside className={`sidebar ${isOpen ? 'open' : ''}`}>\n        <div className=\"sidebar-content\">\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-section-title\">Main Menu</div>\n            <nav className=\"sidebar-nav\">\n              {navItems.map(item => (\n                <NavLink\n                  key={item.path}\n                  to={item.path}\n                  className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\n                >\n                  <span className=\"sidebar-icon\">{item.icon}</span>\n                  <span className=\"sidebar-label\">{item.label}</span>\n                  {item.badge > 0 && (\n                    <span className=\"sidebar-badge\">{item.badge}</span>\n                  )}\n                </NavLink>\n              ))}\n            </nav>\n          </div>\n\n          <div className=\"sidebar-section\">\n            <div className=\"sidebar-section-title\">Management</div>\n            <nav className=\"sidebar-nav\">\n              {adminItems.map(item => (\n                <NavLink\n                  key={item.path}\n                  to={item.path}\n                  className={({ isActive }) => `sidebar-link ${isActive ? 'active' : ''}`}\n                >\n                  <span className=\"sidebar-icon\">{item.icon}</span>\n                  <span className=\"sidebar-label\">{item.label}</span>\n                </NavLink>\n              ))}\n            </nav>\n          </div>\n        </div>\n      </aside>\n      {isOpen && <div className=\"sidebar-overlay\" />}\n    </>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport Sidebar from './Sidebar';\nimport { getProfile, getPendingRequests } from '../services/api';\nimport '../styles/layout.css';\n\nexport default function Layout({ children }) {\n  const [user, setUser] = useState(null);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [unreadChat, setUnreadChat] = useState(0);\n  const [pendingConnections, setPendingConnections] = useState(0);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const res = await getProfile();\n        setUser(res.user);\n      } catch (err) {\n        localStorage.removeItem('token');\n        navigate('/login');\n      }\n    }\n    load();\n  }, [navigate]);\n\n  useEffect(() => {\n    async function loadPendingConnections() {\n      try {\n        const res = await getPendingRequests();\n        setPendingConnections(res.count || 0);\n      } catch (err) {\n        console.error('Failed to load pending connections:', err);\n      }\n    }\n    loadPendingConnections();\n    const interval = setInterval(loadPendingConnections, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    const handler = (e) => {\n      const added = e?.detail?.added || 1;\n      setUnreadChat(c => c + added);\n    };\n    window.addEventListener('chat:new-message', handler);\n    return () => window.removeEventListener('chat:new-message', handler);\n  }, []);\n\n  useEffect(() => {\n    const handler = () => {\n      setPendingConnections(c => c + 1);\n    };\n    window.addEventListener('connection:new-request', handler);\n    return () => window.removeEventListener('connection:new-request', handler);\n  }, []);\n\n  const toggleSidebar = () => setSidebarOpen(!sidebarOpen);\n\n  return (\n    <div className=\"app-layout\">\n      <Navbar user={user} onToggleSidebar={toggleSidebar} sidebarOpen={sidebarOpen} />\n      <Sidebar isOpen={sidebarOpen} unreadChat={unreadChat} pendingConnections={pendingConnections} />\n      <main className={`main-content ${sidebarOpen ? 'sidebar-open' : 'sidebar-closed'}`}>\n        {children}\n      </main>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport Home from './pages/Home';\nimport Dashboard from './pages/Dashboard';\nimport AdminDashboard from './pages/AdminDashboard';\nimport AdminLogin from './pages/AdminLogin';\nimport Browse from './pages/Browse';\nimport AllPlaces from './pages/AllPlaces';\nimport Analysis from './pages/Analysis';\nimport UserAnalysis from './pages/UserAnalysis';\nimport TrendingExperiences from './pages/TrendingExperiences';\nimport AddExperiences from './pages/AddExperiences';\nimport CreatedExperiences from './pages/CreatedExperiences';\nimport Chat from './pages/Chat';\nimport Payment from './pages/Payment';\nimport Recommendation from './pages/Recommendation';\nimport Reviews from './pages/Reviews';\nimport GiveReview from './pages/GiveReview';\nimport ReviewManage from './pages/ReviewManage';\nimport Connections from './pages/Connections';\nimport FindPeople from './pages/FindPeople';\nimport Messages from './pages/Messages';\nimport DirectChat from './pages/DirectChat';\nimport RequireAuth from './components/RequireAuth';\nimport Layout from './components/Layout';\nimport { NotificationsProvider } from './contexts/NotificationsContext';\nimport './styles/connections.css';\nimport './styles/userDirectory.css';\nimport './styles/directChat.css';\n\nexport default function App() {\n  return (\n    <NotificationsProvider>\n      <Routes>\n        <Route path=\"/\" element={<Navigate to=\"/home\" replace />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/admin-login\" element={<AdminLogin />} />\n        <Route path=\"/home\" element={\n          <RequireAuth>\n            <Layout><Home /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/browse\" element={\n          <RequireAuth>\n            <Layout><Browse /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/all-places\" element={\n          <RequireAuth>\n            <Layout><AllPlaces /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/dashboard\" element={\n          <RequireAuth>\n            <Layout><Dashboard /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/payment\" element={\n          <RequireAuth>\n            <Layout><Payment /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/chat\" element={\n          <RequireAuth>\n            <Layout><Chat /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/trending\" element={\n          <RequireAuth>\n            <Layout><TrendingExperiences /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/recommendation\" element={\n          <RequireAuth>\n            <Layout><Recommendation /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/admin\" element={\n          <RequireAuth>\n            <Layout><AdminDashboard /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/admin/reviews\" element={\n          <RequireAuth>\n            <Layout><ReviewManage /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/analysis\" element={\n          <RequireAuth>\n            <Layout><Analysis /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/analysis/:id\" element={\n          <RequireAuth>\n            <Layout><UserAnalysis /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/add-experiences\" element={\n          <RequireAuth>\n            <Layout><AddExperiences /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/created-experiences\" element={\n          <RequireAuth>\n            <Layout><CreatedExperiences /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/reviews\" element={\n          <RequireAuth>\n            <Layout><Reviews /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/give-review\" element={\n          <RequireAuth>\n            <Layout><GiveReview /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/connections\" element={\n          <RequireAuth>\n            <Layout><Connections /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/find-people\" element={\n          <RequireAuth>\n            <Layout><FindPeople /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/messages\" element={\n          <RequireAuth>\n            <Layout><Messages /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"/direct-chat/:userId\" element={\n          <RequireAuth>\n            <Layout><DirectChat /></Layout>\n          </RequireAuth>\n        } />\n        <Route path=\"*\" element={<div className=\"container\"><h2>Page not found</h2></div>} />\n      </Routes>\n    </NotificationsProvider>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\nimport { ThemeProvider } from './contexts/ThemeContext';\nimport './index.css';\n\n// provide minimal process fallback for browser builds where process is missing\nif (typeof process === 'undefined') {\n  // keep this minimal  avoid leaking secrets; env vars for CRA should use REACT_APP_ prefixed vars\n  window.process = { env: {} };\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider>\n      <Router>\n        <App />\n      </Router>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}